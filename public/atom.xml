<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Oh-My-Wiki</title>
  
  
  <link href="/wiki/atom.xml" rel="self"/>
  
  <link href="https://wencaizhang.gitee.io/"/>
  <updated>2018-12-25T07:48:43.499Z</updated>
  <id>https://wencaizhang.gitee.io/</id>
  
  <author>
    <name>wencaizhang</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>js 中使用 let 和 const 的总结</title>
    <link href="https://wencaizhang.gitee.io/wiki/oh-my-article/js/2018-10/difference-of-let-and-const/"/>
    <id>https://wencaizhang.gitee.io/wiki/oh-my-article/js/2018-10/difference-of-let-and-const/</id>
    <published>2018-10-14T03:51:14.000Z</published>
    <updated>2018-12-25T07:48:43.499Z</updated>
    
    <content type="html"><![CDATA[<p>ES6 引入了 <code>let</code> 命令用于声明<strong>变量</strong>，引入了 <code>const</code> 命令用于声明<strong>常量</strong>。然而仅仅知道这些是不够的，具体哪些场景下使用 <code>let</code>，哪些场景使用 <code>const</code> 仍然令人感到疑惑。</p><p>这两个命令的学习可参考文章：<a href="http://es6.ruanyifeng.com/#docs/let" rel="external nofollow noopener noreferrer" target="_blank">let 和 const 命令</a>，这里只参考下面一段话：</p><blockquote><p><code>const</code> 实际上保证的，并不是变量的值不得改动，而是变量指向的那个内存地址所保存的数据不得改动。对于简单类型的数据（数值、字符串、布尔值），值就保存在变量指向的那个内存地址，因此等同于常量。但对于复合类型的数据（主要是对象和数组），变量指向的内存地址，保存的只是一个指向实际数据的指针，<code>const</code> 只能保证这个指针是固定的（即总是指向另一个固定的地址），至于它指向的数据结构是不是可变的，就完全不能控制了。</p></blockquote><p>因此，我认为声明简单类型数据（数字、字符串、布尔值）的时候使用 <code>let</code>，而在声明引用类型（对象、数组）的时候使用 <code>const</code>。</p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="http://es6.ruanyifeng.com/#docs/let" rel="external nofollow noopener noreferrer" target="_blank">let 和 const 命令</a></li><li><a href="https://blog.csdn.net/qq_35713752/article/details/81701262" rel="external nofollow noopener noreferrer" target="_blank">js中 let var const 的差异和使用场景</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;ES6 引入了 &lt;code&gt;let&lt;/code&gt; 命令用于声明&lt;strong&gt;变量&lt;/strong&gt;，引入了 &lt;code&gt;const&lt;/code&gt; 命令用于声明&lt;strong&gt;常量&lt;/strong&gt;。然而仅仅知道这些是不够的，具体哪些场景下使用 &lt;code&gt;let&lt;/cod
      
    
    </summary>
    
      <category term="oh-my-article" scheme="https://wencaizhang.gitee.io/categories/oh-my-article/"/>
    
      <category term="js" scheme="https://wencaizhang.gitee.io/categories/oh-my-article/js/"/>
    
      <category term="2018-10" scheme="https://wencaizhang.gitee.io/categories/oh-my-article/js/2018-10/"/>
    
    
      <category term="javascript" scheme="https://wencaizhang.gitee.io/tags/javascript/"/>
    
      <category term="es6" scheme="https://wencaizhang.gitee.io/tags/es6/"/>
    
  </entry>
  
  <entry>
    <title>为 Markdown 写作配置七牛云图床</title>
    <link href="https://wencaizhang.gitee.io/wiki/oh-my-article/tool/upload-markdown-picture-to-qiniuyun/"/>
    <id>https://wencaizhang.gitee.io/wiki/oh-my-article/tool/upload-markdown-picture-to-qiniuyun/</id>
    <published>2018-10-12T12:20:51.000Z</published>
    <updated>2018-10-12T14:20:33.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="What-is-This"><a href="#What-is-This" class="headerlink" title="What is This"></a>What is This</h2><p>使用 Markdown 写作大家带来了很大的方便，但是如何处理图片一直是个问题，这里分享一个我使用的解决方案。</p><h2 id="如何使用"><a href="#如何使用" class="headerlink" title="如何使用"></a>如何使用</h2><p>首先要拥有一个七牛云的账号（<a href="https://portal.qiniu.com/signup?code=3ln23pc0t2xci" rel="external nofollow noopener noreferrer" target="_blank">七牛云注册地址</a>），然后通过 Chrome 网上应用商店安装 qiniu upload files 插件（<a href="https://chrome.google.com/webstore/detail/qiniu-upload-files/emmfkgdgapbjphdolealbojmcmnphdcc?utm_source=chrome-ntp-icon" rel="external nofollow noopener noreferrer" target="_blank">点击这里进行安装</a>）。</p><p>插件安装之后进行配置（截图如下）：</p><ol><li>AccessKey 和 SecretKey 可以从七牛云网站个人面板下的密钥管理界面获取</li><li>域名末尾记得加上 <code>/</code>，否则插件生成的链接可能有问题</li><li>bucket 是创建的储存空间的名字</li><li>其他配置项可以不填</li></ol><p><img src="http://qiniu.wencaizhang.com/qiniu-upload-files-config.png" alt="插件配置"></p><h2 id="可能有用的链接："><a href="#可能有用的链接：" class="headerlink" title="可能有用的链接："></a>可能有用的链接：</h2><ol><li><a href="https://chrome.google.com/webstore/detail/qiniu-upload-files/emmfkgdgapbjphdolealbojmcmnphdcc?utm_source=chrome-ntp-icon" rel="external nofollow noopener noreferrer" target="_blank">qiniu upload files 插件下载地址</a></li><li><a href="https://portal.qiniu.com/signup?code=3ln23pc0t2xci" rel="external nofollow noopener noreferrer" target="_blank">七牛云注册地址</a></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;What-is-This&quot;&gt;&lt;a href=&quot;#What-is-This&quot; class=&quot;headerlink&quot; title=&quot;What is This&quot;&gt;&lt;/a&gt;What is This&lt;/h2&gt;&lt;p&gt;使用 Markdown 写作大家带来了很大的方便，但是如何处
      
    
    </summary>
    
      <category term="oh-my-article" scheme="https://wencaizhang.gitee.io/categories/oh-my-article/"/>
    
      <category term="tool" scheme="https://wencaizhang.gitee.io/categories/oh-my-article/tool/"/>
    
    
      <category term="markdown" scheme="https://wencaizhang.gitee.io/tags/markdown/"/>
    
      <category term="图床" scheme="https://wencaizhang.gitee.io/tags/%E5%9B%BE%E5%BA%8A/"/>
    
      <category term="chrome 插件" scheme="https://wencaizhang.gitee.io/tags/chrome-%E6%8F%92%E4%BB%B6/"/>
    
  </entry>
  
  <entry>
    <title>如何查找数组中指定元素</title>
    <link href="https://wencaizhang.gitee.io/wiki/oh-my-article/js/2018-10/array-find/"/>
    <id>https://wencaizhang.gitee.io/wiki/oh-my-article/js/2018-10/array-find/</id>
    <published>2018-10-09T08:51:14.000Z</published>
    <updated>2018-12-25T07:48:43.118Z</updated>
    
    <content type="html"><![CDATA[<h2 id="场景"><a href="#场景" class="headerlink" title="场景"></a>场景</h2><p>我们经常会遇到这样的情况：假设现在有下面这样一个数组，现在需要在该数组中找到 <code>id 等于 2</code> 的元素。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">text</span>: <span class="string">'11111'</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">text</span>: <span class="string">'22222'</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">text</span>: <span class="string">'33333'</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">4</span>, <span class="attr">text</span>: <span class="string">'44444'</span> &#125;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>这个问题有很多解决的方法，例如：遍历然后逐个元素进行判断。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> target;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">  <span class="keyword">var</span> item = arr[i];</span><br><span class="line">  <span class="keyword">if</span> (item.id == <span class="number">2</span>) &#123;</span><br><span class="line">    target = item</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(target);  <span class="comment">// &#123;id: 2, text: "22222"&#125;</span></span><br></pre></td></tr></table></figure><p>这里有一个简单的方法，实现如下</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> target = arr.find(<span class="function"><span class="params">item</span> =&gt;</span> item.id == <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(target)  <span class="comment">// &#123;id: 2, text: "22222"&#125;</span></span><br></pre></td></tr></table></figure><h2 id="描述"><a href="#描述" class="headerlink" title="描述"></a>描述</h2><p><code>find</code> 方法用于找出第一个符合条件的数组元素。如果没有符合条件的元素，则返回 <code>undefined</code>。</p><p><code>find</code> 方法第一个参数是一个回调函数，而这个判断条件是此回调函数的返回值是否为 true（这里会对返回值进行隐式转换）。</p><p>数组中每一项元素依次执行该回调函数，直到找到第一个返回值为 <code>true</code> 的元素，方法停止执行，然后返回该元素。</p><p><code>find</code> 方法还可以接收第二个参数用于指定回调函数的 <code>this</code> 指向。</p><h3 id="回调函数默认接收三个参数"><a href="#回调函数默认接收三个参数" class="headerlink" title="回调函数默认接收三个参数"></a>回调函数默认接收三个参数</h3><p><code>find</code> 方法的第一个参数默认接收三个参数，第一个是遍历的数组元素，第二个是对应的数组索引，第三个是数组本身。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [ <span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span> ]</span><br><span class="line"></span><br><span class="line">arr.find(<span class="function">(<span class="params">value, index, array</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(value, index, array)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// a 0 ["a", "b", "c"]</span></span><br><span class="line"><span class="comment">// b 1 ["a", "b", "c"]</span></span><br><span class="line"><span class="comment">// c 2 ["a", "b", "c"]</span></span><br></pre></td></tr></table></figure><h3 id="find-的返回值"><a href="#find-的返回值" class="headerlink" title="find() 的返回值"></a><code>find()</code> 的返回值</h3><p>有符合条件的，返回该数组元素，没有符合条件的，返回 <code>undefined</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [ <span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span> ];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> result1 = arr.find(<span class="function"><span class="params">v</span> =&gt;</span> v == <span class="string">'c'</span>)</span><br><span class="line"><span class="built_in">console</span>.log(result1) <span class="comment">// "c"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> result2 = arr.find(<span class="function"><span class="params">v</span> =&gt;</span> v == <span class="string">'xyz'</span>)</span><br><span class="line"><span class="built_in">console</span>.log(result2) <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure><h3 id="找到第一个符合条件的，方法立即结束执行"><a href="#找到第一个符合条件的，方法立即结束执行" class="headerlink" title="找到第一个符合条件的，方法立即结束执行"></a>找到第一个符合条件的，方法立即结束执行</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [ <span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'b'</span>, <span class="string">'c'</span> ];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> result = arr.find(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(value);</span><br><span class="line">  <span class="keyword">return</span> value == <span class="string">'b'</span>;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// "a"</span></span><br><span class="line"><span class="comment">// "b"</span></span><br><span class="line"><span class="built_in">console</span>.log(result); <span class="comment">// "b"</span></span><br></pre></td></tr></table></figure><h3 id="指定-callback-执行时的-this-指向"><a href="#指定-callback-执行时的-this-指向" class="headerlink" title="指定 callback 执行时的 this 指向"></a>指定 callback 执行时的 <code>this</code> 指向</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ages = [ <span class="number">10</span>, <span class="number">12</span>, <span class="number">26</span>, <span class="number">15</span> ];</span><br><span class="line"><span class="keyword">const</span> person = &#123; <span class="attr">name</span>: <span class="string">'John'</span>, <span class="attr">age</span>: <span class="number">20</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> age = ages.find(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> value &gt; <span class="keyword">this</span>.age;</span><br><span class="line">&#125;, person);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(age);  <span class="comment">// 26</span></span><br></pre></td></tr></table></figure><h2 id="简易实现"><a href="#简易实现" class="headerlink" title="简易实现"></a>简易实现</h2><p><code>find</code> 方法在 ES6 中提出，尚未被所有浏览器实现，这里有一个简易版的实现方法。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.find = <span class="function"><span class="keyword">function</span> (<span class="params">callback, context</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!<span class="keyword">this</span> <span class="keyword">instanceof</span> <span class="built_in">Array</span>) &#123; <span class="keyword">return</span>;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> bool, target;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="keyword">this</span>.length; i++) &#123;</span><br><span class="line"></span><br><span class="line">    bool = !!callback.call(context, <span class="keyword">this</span>[i], i, <span class="keyword">this</span>);</span><br><span class="line">    <span class="keyword">if</span> (bool) &#123;</span><br><span class="line">      target = <span class="keyword">this</span>[i];</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> target</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;场景&quot;&gt;&lt;a href=&quot;#场景&quot; class=&quot;headerlink&quot; title=&quot;场景&quot;&gt;&lt;/a&gt;场景&lt;/h2&gt;&lt;p&gt;我们经常会遇到这样的情况：假设现在有下面这样一个数组，现在需要在该数组中找到 &lt;code&gt;id 等于 2&lt;/code&gt; 的元素。&lt;/p&gt;
&lt;
      
    
    </summary>
    
      <category term="oh-my-article" scheme="https://wencaizhang.gitee.io/categories/oh-my-article/"/>
    
      <category term="js" scheme="https://wencaizhang.gitee.io/categories/oh-my-article/js/"/>
    
      <category term="2018-10" scheme="https://wencaizhang.gitee.io/categories/oh-my-article/js/2018-10/"/>
    
    
      <category term="javascript" scheme="https://wencaizhang.gitee.io/tags/javascript/"/>
    
      <category term="array" scheme="https://wencaizhang.gitee.io/tags/array/"/>
    
      <category term="es6" scheme="https://wencaizhang.gitee.io/tags/es6/"/>
    
  </entry>
  
  <entry>
    <title>小程序列表页的下拉刷新</title>
    <link href="https://wencaizhang.gitee.io/wiki/oh-my-article/%E5%B0%8F%E7%A8%8B%E5%BA%8F/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%88%97%E8%A1%A8%E9%A1%B5%E7%9A%84%E4%B8%8B%E6%8B%89%E5%88%B7%E6%96%B0/"/>
    <id>https://wencaizhang.gitee.io/wiki/oh-my-article/小程序/小程序列表页的下拉刷新/</id>
    <published>2018-10-06T07:43:23.000Z</published>
    <updated>2018-12-25T07:58:00.136Z</updated>
    
    <content type="html"><![CDATA[<p>下拉刷新，我们可以使用 <code>onPullDownRefresh()</code> 方法，对此小程序文档是这么说的：</p><blockquote><ul><li>需要在 app.json 的 <a href="https://developers.weixin.qq.com/miniprogram/dev/framework/config.html#window" rel="external nofollow noopener noreferrer" target="_blank">window</a> 选项中或<a href="https://developers.weixin.qq.com/miniprogram/dev/framework/config.html#%E9%A1%B5%E9%9D%A2%E9%85%8D%E7%BD%AE" rel="external nofollow noopener noreferrer" target="_blank">页面配置</a>中开启 enablePullDownRefresh。</li><li>可以通过 <a href="https://developers.weixin.qq.com/miniprogram/dev/api/wx.startPullDownRefresh.html" rel="external nofollow noopener noreferrer" target="_blank"><code>wx.startPullDownRefresh</code></a> 触发下拉刷新，调用后触发下拉刷新动画，效果与用户手动下拉刷新一致。</li><li>当处理完数据刷新后，<a href="https://developers.weixin.qq.com/miniprogram/dev/api/wx.stopPullDownRefresh.html" rel="external nofollow noopener noreferrer" target="_blank"><code>wx.stopPullDownRefresh</code></a> 可以停止当前页面的下拉刷新。</li></ul></blockquote><h3 id="代码实例"><a href="#代码实例" class="headerlink" title="代码实例"></a>代码实例</h3><h4 id="第一步：开启-enablePullDownRefresh"><a href="#第一步：开启-enablePullDownRefresh" class="headerlink" title="第一步：开启 enablePullDownRefresh"></a>第一步：开启 enablePullDownRefresh</h4><p>配置 <code>app.json</code></p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">window: &#123;</span><br><span class="line">  enablePullDownRefresh: true,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>或者修改页面配置</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"enablePullDownRefresh"</span>: <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="第二步：监听下拉刷新事件"><a href="#第二步：监听下拉刷新事件" class="headerlink" title="第二步：监听下拉刷新事件"></a>第二步：监听下拉刷新事件</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">Page(&#123;</span><br><span class="line">  data: &#123;</span><br><span class="line">    pageSize: <span class="number">10</span>,</span><br><span class="line">    currPage: <span class="number">0</span>,</span><br><span class="line">    list: []</span><br><span class="line">  &#125;,</span><br><span class="line">  onLoad() &#123;</span><br><span class="line">    <span class="keyword">this</span>.fetchData();</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  onPullDownRefresh() &#123;</span><br><span class="line">    <span class="keyword">this</span>.fetchData();</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  fetchData() &#123;</span><br><span class="line">    <span class="keyword">const</span> self = <span class="keyword">this</span>;</span><br><span class="line">    <span class="keyword">const</span> &#123; pageSize, currPage, list &#125; = <span class="keyword">this</span>.data;</span><br><span class="line">    <span class="comment">// 这个方法用于请求数据，</span></span><br><span class="line">    wx.request(&#123;</span><br><span class="line">      url: <span class="string">"test.php"</span>, <span class="comment">// 仅为示例，并非真实的接口地址</span></span><br><span class="line">      data: &#123;</span><br><span class="line">        pageSize,</span><br><span class="line">        currPage: currPage + <span class="number">1</span></span><br><span class="line">      &#125;,</span><br><span class="line">      success(res) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(res.data);</span><br><span class="line">        self.setData(&#123;</span><br><span class="line">          list: list.concat(res.data),</span><br><span class="line">          currPage: currPage + <span class="number">1</span></span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">// 处理完成后，终止下拉刷新</span></span><br><span class="line">        wx.stopPullDownRefresh();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;下拉刷新，我们可以使用 &lt;code&gt;onPullDownRefresh()&lt;/code&gt; 方法，对此小程序文档是这么说的：&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;需要在 app.json 的 &lt;a href=&quot;https://developers.weixin
      
    
    </summary>
    
      <category term="oh-my-article" scheme="https://wencaizhang.gitee.io/categories/oh-my-article/"/>
    
      <category term="小程序" scheme="https://wencaizhang.gitee.io/categories/oh-my-article/%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    
    
      <category term="小程序" scheme="https://wencaizhang.gitee.io/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    
  </entry>
  
  <entry>
    <title>小程序列表页的上拉加载</title>
    <link href="https://wencaizhang.gitee.io/wiki/oh-my-article/%E5%B0%8F%E7%A8%8B%E5%BA%8F/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%88%97%E8%A1%A8%E9%A1%B5%E7%9A%84%E4%B8%8A%E6%8B%89%E5%8A%A0%E8%BD%BD/"/>
    <id>https://wencaizhang.gitee.io/wiki/oh-my-article/小程序/小程序列表页的上拉加载/</id>
    <published>2018-10-06T07:43:23.000Z</published>
    <updated>2018-12-25T07:57:48.848Z</updated>
    
    <content type="html"><![CDATA[<p>上拉刷新，我们可以使用 <code>onReachBottom()</code> 方法，<a href="https://developers.weixin.qq.com/miniprogram/dev/framework/app-service/page.html#%E9%A1%B5%E9%9D%A2%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0" rel="external nofollow noopener noreferrer" target="_blank">小程序文档</a>是这么说的：</p><blockquote><ul><li>监听用户上拉触底事件。</li><li>可以在 <code>app.json</code> 的 <code>window</code> 选项中或页面配置中设置触发距离 <code>onReachBottomDistance</code>。</li><li>在触发距离内滑动期间，本事件只会被触发一次。</li></ul></blockquote><p>代码实例：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">Page(&#123;</span><br><span class="line">  data: &#123;</span><br><span class="line">    pageSize: <span class="number">10</span>,</span><br><span class="line">    currPage: <span class="number">0</span>,</span><br><span class="line">    list: []</span><br><span class="line">  &#125;,</span><br><span class="line">  onLoad () &#123;</span><br><span class="line">    <span class="keyword">this</span>.fetchData();</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  onReachBottom () &#123;</span><br><span class="line">    <span class="keyword">this</span>.fetchData();</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  fetchData () &#123;</span><br><span class="line"><span class="comment">// 这个方法用于请求数据</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> self = <span class="keyword">this</span>;</span><br><span class="line">    <span class="keyword">const</span> &#123; pageSize, currPage, list &#125; = <span class="keyword">this</span>.data;</span><br><span class="line">    </span><br><span class="line">    wx.request(&#123;</span><br><span class="line">      url: <span class="string">'test.php'</span>, <span class="comment">// 仅为示例，并非真实的接口地址</span></span><br><span class="line">      data: &#123;</span><br><span class="line">        pageSize,</span><br><span class="line">        currPage: currPage + <span class="number">1</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">      success(res) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(res.list)</span><br><span class="line">        self.setData(&#123;</span><br><span class="line">          list: list.concat(res.list),</span><br><span class="line">          currPage: currPage + <span class="number">1</span></span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;上拉刷新，我们可以使用 &lt;code&gt;onReachBottom()&lt;/code&gt; 方法，&lt;a href=&quot;https://developers.weixin.qq.com/miniprogram/dev/framework/app-service/page.html#%E9
      
    
    </summary>
    
      <category term="oh-my-article" scheme="https://wencaizhang.gitee.io/categories/oh-my-article/"/>
    
      <category term="小程序" scheme="https://wencaizhang.gitee.io/categories/oh-my-article/%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    
    
      <category term="小程序" scheme="https://wencaizhang.gitee.io/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    
  </entry>
  
  <entry>
    <title>小程序的传参方案</title>
    <link href="https://wencaizhang.gitee.io/wiki/oh-my-article/%E5%B0%8F%E7%A8%8B%E5%BA%8F/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E7%9A%84%E4%BC%A0%E5%8F%82%E6%96%B9%E6%A1%88/"/>
    <id>https://wencaizhang.gitee.io/wiki/oh-my-article/小程序/小程序的传参方案/</id>
    <published>2018-10-06T07:43:23.000Z</published>
    <updated>2018-12-25T07:59:08.994Z</updated>
    
    <content type="html"><![CDATA[<h3 id="一、点击事件传参"><a href="#一、点击事件传参" class="headerlink" title="一、点击事件传参"></a>一、点击事件传参</h3><h4 id="1-通过-data-属性指定参数"><a href="#1-通过-data-属性指定参数" class="headerlink" title="1. 通过 data-* 属性指定参数"></a>1. 通过 <code>data-*</code> 属性指定参数</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"block"</span> <span class="attr">bindtap</span>=<span class="string">"playTap"</span> <span class="attr">data-id</span>=<span class="string">"&#123;&#123;modle.id&#125;&#125;"</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="2-通过事件对象-e-获取参数"><a href="#2-通过事件对象-e-获取参数" class="headerlink" title="2. 通过事件对象 e 获取参数"></a>2. 通过事件对象 <code>e</code> 获取参数</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">playTap (e) &#123;</span><br><span class="line"><span class="keyword">const</span> dataset = e.currentTarget.dataset;</span><br><span class="line"><span class="built_in">console</span>.log(dataset.id)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="二、页面跳转传参"><a href="#二、页面跳转传参" class="headerlink" title="二、页面跳转传参"></a>二、页面跳转传参</h3><p>小程序页面和普通的 html 相似，都可以通过查询字符串（例如 <code>?a=1&amp;b=2</code> 的形式）传递参数。</p><h4 id="1-通过查询字符串传参"><a href="#1-通过查询字符串传参" class="headerlink" title="1. 通过查询字符串传参"></a>1. 通过查询字符串传参</h4><p>还是上面的例子，获取到 <code>id</code> 之后，跳转到新页面并将 <code>id</code> 传递到新页面，那么就可以这么写：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">playTap (e) &#123;</span><br><span class="line"><span class="keyword">const</span> dataset = e.currentTarget.dataset;</span><br><span class="line"><span class="built_in">console</span>.log(dataset.id);</span><br><span class="line">wx.navigateTo(&#123;</span><br><span class="line">url: <span class="string">'../play/index/?id='</span> + dataset.id</span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-在生命周期函数-onLoad-中获取参数："><a href="#2-在生命周期函数-onLoad-中获取参数：" class="headerlink" title="2. 在生命周期函数 onLoad 中获取参数："></a>2. 在生命周期函数 <code>onLoad</code> 中获取参数：</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">onLoad (options) &#123;</span><br><span class="line"><span class="built_in">console</span>.log(options)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;一、点击事件传参&quot;&gt;&lt;a href=&quot;#一、点击事件传参&quot; class=&quot;headerlink&quot; title=&quot;一、点击事件传参&quot;&gt;&lt;/a&gt;一、点击事件传参&lt;/h3&gt;&lt;h4 id=&quot;1-通过-data-属性指定参数&quot;&gt;&lt;a href=&quot;#1-通过-data-属性指
      
    
    </summary>
    
      <category term="oh-my-article" scheme="https://wencaizhang.gitee.io/categories/oh-my-article/"/>
    
      <category term="小程序" scheme="https://wencaizhang.gitee.io/categories/oh-my-article/%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    
    
      <category term="小程序" scheme="https://wencaizhang.gitee.io/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    
  </entry>
  
  <entry>
    <title>网络请求接口-fetch</title>
    <link href="https://wencaizhang.gitee.io/wiki/oh-my-article/js/2018-09/fetch-api-md/"/>
    <id>https://wencaizhang.gitee.io/wiki/oh-my-article/js/2018-09/fetch-api-md/</id>
    <published>2018-09-30T11:30:13.000Z</published>
    <updated>2018-12-25T07:48:43.118Z</updated>
    
    <content type="html"><![CDATA[<h2 id="fetch-简介"><a href="#fetch-简介" class="headerlink" title="fetch 简介"></a>fetch 简介</h2><p>最简单的 fetch 请求如下</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">fetch(<span class="string">'http://example.com/movies.json'</span>)</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span>(<span class="params">resp</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> resp.json();</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><p>fetch 请求</p><h2 id="封装"><a href="#封装" class="headerlink" title="封装"></a>封装</h2><h3 id="1-GET-请求"><a href="#1-GET-请求" class="headerlink" title="1 GET 请求"></a>1 GET 请求</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">getData (url) &#123;</span><br><span class="line">  <span class="keyword">return</span> fetch(url)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-POST-请求"><a href="#2-POST-请求" class="headerlink" title="2 POST 请求"></a>2 POST 请求</h3><p>以 form-data 形式提交数据</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">postData (url, payload) &#123;</span><br><span class="line">  <span class="keyword">return</span> fetch(url, &#123;</span><br><span class="line">    method: <span class="string">'POST'</span>,</span><br><span class="line">    body: <span class="built_in">JSON</span>.stringify(payload),</span><br><span class="line">    headers: <span class="keyword">new</span> Headers(&#123;</span><br><span class="line">      <span class="string">'Content-Type'</span>: <span class="string">'application/x-www-form-urlencoded'</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>以 json 形式提交数据<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">postJSON (url, payload) &#123;</span><br><span class="line">  <span class="keyword">return</span> fetch(url, &#123;</span><br><span class="line">    method: <span class="string">'POST'</span>,</span><br><span class="line">    body: <span class="built_in">JSON</span>.stringify(payload),</span><br><span class="line">    headers: <span class="keyword">new</span> Headers(&#123;</span><br><span class="line">      <span class="string">'Content-Type'</span>: <span class="string">'application/json'</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="应用"><a href="#应用" class="headerlink" title="应用"></a>应用</h2><p>example</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> url = <span class="string">'http://example.com/api/goods_list/'</span></span><br><span class="line"><span class="keyword">const</span> data = &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">postJSON(url, data)</span><br><span class="line">.then(<span class="function"><span class="params">resp</span> =&gt;</span> resp.json())</span><br><span class="line">.then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(data)</span><br><span class="line">&#125;)</span><br><span class="line">.catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(err)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>example2</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">async</span> fn () &#123;</span><br><span class="line">  <span class="keyword">let</span> url = <span class="string">'http://example.com/api/goods_list/'</span></span><br><span class="line">  <span class="keyword">const</span> data = &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> resp = <span class="keyword">await</span> postJSON(url, data)</span><br><span class="line">    <span class="keyword">const</span> data = <span class="keyword">await</span> resp.json()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 下面开始对返回的数据进行处理</span></span><br><span class="line">    <span class="keyword">if</span> (resp.status == <span class="number">200</span>) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'success'</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;fetch-简介&quot;&gt;&lt;a href=&quot;#fetch-简介&quot; class=&quot;headerlink&quot; title=&quot;fetch 简介&quot;&gt;&lt;/a&gt;fetch 简介&lt;/h2&gt;&lt;p&gt;最简单的 fetch 请求如下&lt;/p&gt;
&lt;figure class=&quot;highlight j
      
    
    </summary>
    
      <category term="oh-my-article" scheme="https://wencaizhang.gitee.io/categories/oh-my-article/"/>
    
      <category term="js" scheme="https://wencaizhang.gitee.io/categories/oh-my-article/js/"/>
    
      <category term="2018-09" scheme="https://wencaizhang.gitee.io/categories/oh-my-article/js/2018-09/"/>
    
    
      <category term="javascript" scheme="https://wencaizhang.gitee.io/tags/javascript/"/>
    
      <category term="fetch" scheme="https://wencaizhang.gitee.io/tags/fetch/"/>
    
      <category term="ajax" scheme="https://wencaizhang.gitee.io/tags/ajax/"/>
    
      <category term="react-native" scheme="https://wencaizhang.gitee.io/tags/react-native/"/>
    
  </entry>
  
  <entry>
    <title>JavaScript 连续赋值</title>
    <link href="https://wencaizhang.gitee.io/wiki/oh-my-article/todoxxx/JavaScript-continuous-assignment-operator/"/>
    <id>https://wencaizhang.gitee.io/wiki/oh-my-article/todoxxx/JavaScript-continuous-assignment-operator/</id>
    <published>2018-05-22T10:41:00.000Z</published>
    <updated>2018-12-25T07:48:43.431Z</updated>
    
    <content type="html"><![CDATA[<h2 id="题目：下面代码的打印结果是什么"><a href="#题目：下面代码的打印结果是什么" class="headerlink" title="题目：下面代码的打印结果是什么"></a>题目：下面代码的打印结果是什么</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = &#123; <span class="attr">n</span>: <span class="number">1</span> &#125;;</span><br><span class="line">a.x = a = &#123; <span class="attr">n</span>: <span class="number">2</span> &#125;;</span><br><span class="line"><span class="built_in">console</span>.log(a.x);</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="理解："><a href="#理解：" class="headerlink" title="理解："></a>理解：</h2><p>先啰嗦两句基本知识：</p><ol><li>符号 <code>=</code> 不叫“等于号 ”，这是赋值操作，代码从右往左执行，如 <code>x = 10;</code> 就读作“把 10 赋值给变量 x“</li><li>如果一个变量的数据类型是对象，那么这个变量存储的仅仅是这个对象在堆内存中的地址。</li></ol><p>正文开始：</p><p>第一行代码：首先在堆内存中创建一个对象 <code>{ n: 1 }</code>，然后在栈内存中创建一个变量 <code>a</code> ，<code>a</code> 储存的值实际上是对象 <code>{ n: 1 }</code> 的内存地址，我们假设为 <code>@n1</code>（实际内存地址使用 4 位 16 进制表示）。</p><p><img src="http://7xvule.com1.z0.glb.clouddn.com/stack01.png" alt=""></p><p>第二行代码：<code>.</code> 表示字段访问，其优先级最高。因此首先给变量 <code>a</code> 增加属性 <code>x</code>，属性 <code>x</code> 在未赋值时是 <code>undefined</code>，然后在堆内存中创建一个对象 <code>{ n: 2 }</code>，假设其内存地址为 <code>@n2</code>（如下图）。</p><p><img src="http://7xvule.com1.z0.glb.clouddn.com/stack02.png" alt=""></p><p>先将这个内存地址 <code>@n2</code> 赋值给变量 <code>a</code>，然后将这个内存地址赋值给 <code>a.x</code>，但此时这个 <code>a.x</code> 指代的是内存地址为 <code>@n1</code> 的对象的属性 <code>x</code>。</p><p><img src="http://7xvule.com1.z0.glb.clouddn.com/stack03.png" alt=""></p><p>第三行代码：打印 <code>a.x</code>，由于已经将内存地址为 <code>@n2</code> 赋值给了变量 <code>a</code>，并不存在属性 <code>x</code> ，因此打印结果是 <code>undefined</code> 。</p><h2 id="易错点"><a href="#易错点" class="headerlink" title="易错点"></a>易错点</h2><p>这个问题关键点在于第二行连续赋值操作中，先操作了 <code>.</code> 运算符拿到了 <code>a.x</code> 的地址，即 <code>@n1</code> 对象的属性 <code>x</code>，然后改变了 <code>a</code> 保存的引用地址（由 <code>@n1</code> 改为 <code>@n2</code>）。</p><p>但是 <code>a.x</code> 已经优先计算出了地址，所以并没有受到影响，因此最后将内存地址 <code>@n2</code> 赋值给了 <code>a.x</code> （即 <code>@n1</code> 对象的属性 <code>x</code> )。</p><p>如果将代码稍做修改，也许更容易理解：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = &#123; <span class="attr">n</span>: <span class="number">1</span> &#125;;</span><br><span class="line"><span class="keyword">var</span> b = a;</span><br><span class="line">a.x = a = &#123; <span class="attr">n</span>: <span class="number">2</span> &#125;;</span><br><span class="line"><span class="built_in">console</span>.log(b);</span><br></pre></td></tr></table></figure></p><p>这一次，我们关注 <code>@n1</code> 的变化，先后将 <code>@n1</code> 这个地址赋值给 <code>a</code> 和 <code>b</code>，最后打印 <code>b</code> ，结果是 <code>{ n: 1, x: { n: 2 } }</code>，这就验证了上面的理解。</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;题目：下面代码的打印结果是什么&quot;&gt;&lt;a href=&quot;#题目：下面代码的打印结果是什么&quot; class=&quot;headerlink&quot; title=&quot;题目：下面代码的打印结果是什么&quot;&gt;&lt;/a&gt;题目：下面代码的打印结果是什么&lt;/h2&gt;&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; a = &amp;#123; &lt;span class=&quot;attr&quot;&gt;n&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; &amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;a.x = a = &amp;#123; &lt;span class=&quot;attr&quot;&gt;n&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt; &amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(a.x);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="oh-my-article" scheme="https://wencaizhang.gitee.io/categories/oh-my-article/"/>
    
      <category term="todoxxx" scheme="https://wencaizhang.gitee.io/categories/oh-my-article/todoxxx/"/>
    
    
      <category term="interview" scheme="https://wencaizhang.gitee.io/tags/interview/"/>
    
      <category term="javascript" scheme="https://wencaizhang.gitee.io/tags/javascript/"/>
    
  </entry>
  
  <entry>
    <title>「译」从 URL 输入到页面展现发生了什么</title>
    <link href="https://wencaizhang.gitee.io/wiki/oh-my-article/http/what-really-happens-when-you-navigate-to-a-url/"/>
    <id>https://wencaizhang.gitee.io/wiki/oh-my-article/http/what-really-happens-when-you-navigate-to-a-url/</id>
    <published>2018-05-22T03:26:00.000Z</published>
    <updated>2018-10-23T15:18:44.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>本文翻译自：<a href="http://igoro.com/archive/what-really-happens-when-you-navigate-to-a-url/#" rel="external nofollow noopener noreferrer" target="_blank">What really happens when you navigate to a URL</a></p><p>为方便理解，本文采用意译，如有兴趣，可阅读英文原文</p></blockquote><a id="more"></a><h2 id="步骤："><a href="#步骤：" class="headerlink" title="步骤："></a>步骤：</h2><ol><li>在浏览器中输入网址</li><li>浏览器查找域名对应的 IP 地址</li><li>浏览器向服务器发送 HTTP 请求</li><li>服务器响应并进行重定向</li><li>浏览器向真正的服务器重新发送 HTTP 请求</li><li>服务器处理 HTTP 请求</li><li>服务器响应请求，返回 HTML 页面</li><li>浏览器渲染 HTML 页面</li><li>浏览器请求静态资源，如 css 文件、图片、js 文件</li><li>浏览器发送异步请求</li></ol><p>作为软件开发者，你肯定对 web 应用如何工作以及它工作过程中包含的技术（浏览器、HTML、web server、request handlers 等等）都有一个高水平的认知。</p><p>这篇文章中，我们会对当你访问一个 URL 时发生的一系列事情进行深入研究。</p><h2 id="1-在浏览器中输入网址"><a href="#1-在浏览器中输入网址" class="headerlink" title="1. 在浏览器中输入网址"></a>1. 在浏览器中输入网址</h2><p>输入网址 <code>facebook.com</code>，故事从这里开始：</p><p><img src="http://igoro.com/wordpress/wp-content/uploads/2010/02/image4.png" alt="在浏览器中输入网址"></p><h2 id="2-浏览器查找域名对应的-IP-地址"><a href="#2-浏览器查找域名对应的-IP-地址" class="headerlink" title="2. 浏览器查找域名对应的 IP 地址"></a>2. 浏览器查找域名对应的 IP 地址</h2><p><img src="http://igoro.com/wordpress/wp-content/uploads/2010/02/image13.png" alt="找域名对应的 IP 地址"></p><p>访问一个 URL 的第一步就是得到域名对应的 IP 地址，DNS（Domain Name System，域名系统，万维网上作为域名和IP地址相互映射的一个分布式数据库）查找顺序如下：</p><ol><li>浏览器缓存（Browser cache）</li><li>系统缓存（OS cache）</li><li>路由器缓存（Router cache）</li><li>ISP DNS 缓存（ISP DNS cache）</li><li>递归查找（Recursive search）</li></ol><p>这里有一个图来描述 DNS 递归查找的过程</p><p><img src="http://igoro.com/wordpress/wp-content/uploads/2010/02/500pxAn_example_of_theoretical_DNS_recursion_svg.png" alt="DNS递归查找"></p><blockquote><p>关于 DNS 有件值得担心的事是整个域名像是 wikipedia.org 或者 facebook.com 看起来像是仅仅映射到单一的一个 IP 地址。幸运的是，这里有一些缓解瓶颈的方法：</p><ul><li>Round-robin DNS(轮询调度 DNS)是 DNS 查询结果为多个 IP 地址而不是仅仅一个 IP 地址的解决方案。例如它就解决了 facebook.com 实际上对应着四个 IP 地址的问题。</li><li>Load-balancer (负载均衡)是通过硬件监听指定 IP 地址并且将请求转发到其他服务器。大型网站是使用昂贵的高性能负载均衡器的典型例子。</li><li>Geographic DNS (地理域名系统)通过映射一个域名到不同的 IP 地址的方式提升了可扩展性，这种方法依赖于客户端的地理位置。</li><li>Anycast (任播)是将一个 IP 地址映射到多个物理服务器的路由技术。不幸的是，任播并不适合 TCP 协议，因此在这种情况下几乎不会使用它。</li></ul></blockquote><blockquote><p>绝大部分 DNS 服务器本身使用任播协议来实现 DNS 的高可用性和低延迟性。</p><p>任播(anycast): 是一种网络寻址和路由的策略，使得资料可以根据路由拓朴来决定送到“最近”或“最好”的目的地。</p></blockquote><h2 id="3-浏览器向服务器发送-HTTP-请求"><a href="#3-浏览器向服务器发送-HTTP-请求" class="headerlink" title="3. 浏览器向服务器发送 HTTP 请求"></a>3. 浏览器向服务器发送 HTTP 请求</h2><p><img src="http://igoro.com/wordpress/wp-content/uploads/2010/02/image22.png" alt="向服务器发送 HTTP 请求"></p><p>我们可以非常确定 Facebook 的主页没有被缓存到浏览器中，因为动态页面很快会过期甚至立即过期（把过期时间设置为过去某一时间点）。</p><p>所以，浏览器会将请求发送到 Facebook 的服务器。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">GET http://facebook.com/ HTTP/1.1</span><br><span class="line">Accept: application/x-ms-application, image/jpeg, application/xaml+xml, [...]</span><br><span class="line">User-Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; WOW64; [...]</span><br><span class="line">Accept-Encoding: gzip, deflate</span><br><span class="line">Connection: Keep-Alive</span><br><span class="line">Host: facebook.com</span><br><span class="line">Cookie: datr=1265876274-[...]; locale=en_US; lsd=WW[...]; c_user=2101[...]</span><br></pre></td></tr></table></figure><p><code>GET</code> 请求说明这个 URL 是用来获取的 <code>http://facebook.com</code> 这个页面的 ，浏览器通过 header 中的 <code>User-Agent</code> 来标识自己（用户使用的操作系统及版本，浏览器及版本等等），通过 <code>Accept</code> 和 <code>Accept-Encoding</code> 规定接收哪种类型的响应信息。header 头 <code>Connection</code> 则要求服务器保持 TCP 连接保持连接状态以便于进一步请求。</p><p>另外，这个请求还携带了浏览器在这个域名下的 <code>cookie</code>。你可能已经知道，<code>cookie</code> 是在不同页面中记录网站网站状态的键值对。也就是说，<code>cookie</code> 储存着登录用户的用户名、服务器分配给用户的密码、用户的一些设置等等。<code>cookie</code> 会被储存在客户端的一个文本文件中，每次请求都会一起发送给服务器端。</p><blockquote><p>你可以通过很多工具去查看原生 HTTP 请求和对应的响应信息。我最喜欢的工具是 fiddler，但是仍然有很多别的工具（例如：Firebug），这些工具会给你很大的帮助当你优化一个网站的时候。</p></blockquote><blockquote><p>除了 <code>GET</code> 请求，另外你非常熟悉的另外一种类型的请求是 <code>POST</code> 请求，经常被用作表单提交。<code>GET</code> 请求通过它的 url 发送参数（例如：<code>http://robozzle.com/puzzle.aspx?id=85</code>）,而 <code>POST</code> 请求在 request body 中（就在 request header 下面）发送参数。</p></blockquote><blockquote><p>在 URL <code>http://facebook.com/</code> 中，末尾的 <code>/</code> 是非常重要的。在这个例子中，浏览器可以很安全地在末尾增加 <code>/</code> 。而对于 URL <code>http://example.com/folderOrFile</code>，浏览器就不能自动增加一个 <code>/</code> ，因为浏览器不清楚 <code>folderOrFile</code> 是一个目录还是一个文件。在这种情况下，浏览器将会以不带 <code>/</code> 的形式访问这个 URL ，服务端将会返回一个重定向的响应信息，这就导致了一个不必要的请求和响应。</p></blockquote><h2 id="4-The-facebook-server-responds-with-a-permanent-redirect"><a href="#4-The-facebook-server-responds-with-a-permanent-redirect" class="headerlink" title="4. The facebook server responds with a permanent redirect"></a>4. The facebook server responds with a permanent redirect</h2><p>服务器响应并进行重定向</p><p><img src="http://igoro.com/wordpress/wp-content/uploads/2010/02/image8.png" alt="The facebook server responds with a permanent redirect"></p><p>这是 Facebook 服务端针对浏览器请求返回的响应信息。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">HTTP/1.1 301 Moved Permanently</span><br><span class="line">Cache-Control: private, no-store, no-cache, must-revalidate, post-check=0,</span><br><span class="line">      pre-check=0</span><br><span class="line">Expires: Sat, 01 Jan 2000 00:00:00 GMT</span><br><span class="line">Location: http://www.facebook.com/</span><br><span class="line">P3P: CP=&quot;DSP LAW&quot;</span><br><span class="line">Pragma: no-cache</span><br><span class="line">Set-Cookie: made_write_conn=deleted; expires=Thu, 12-Feb-2009 05:09:50 GMT;</span><br><span class="line">      path=/; domain=.facebook.com; httponly</span><br><span class="line">Content-Type: text/html; charset=utf-8</span><br><span class="line">X-Cnection: close</span><br><span class="line">Date: Fri, 12 Feb 2010 05:09:51 GMT</span><br><span class="line">Content-Length: 0</span><br></pre></td></tr></table></figure><p>服务端通过响应一个永久性转移的 HTTP 状态码来告诉浏览器去访问 <code>http://www.facebook.com/</code> 而不是 <code>http://facebook.com/</code> 。</p><blockquote><p>关于服务端一定要将 <code>http://facebook.com/</code> 重定向到 <code>http://www.facebook.com/</code> ，而不是立即将用户希望看到的页面返回到浏览器，这里有一些有趣的原因。</p><p>其中一个原因和搜索引擎排名有关。如有同一个页面有两个 URL，例如 <code>http://www.igoro.com/</code> 和<code>http://igoro.com/</code>，搜索引擎可能会认为它们是两个不同的网站，每个 URL 的访问量都低于它们的总和就导致较低的排名。搜索引擎理解永久性转移（301），而且会将两个 URL 的点击量合并成一个单独的排名。</p><p>同样的，相同内容对应多个 URL 是不利于缓存的。当一个内容拥有多个名字的时候，它将有可能被缓存多次。</p></blockquote><h2 id="5-The-browser-follows-the-redirect"><a href="#5-The-browser-follows-the-redirect" class="headerlink" title="5. The browser follows the redirect"></a>5. The browser follows the redirect</h2><p>浏览器向真正的服务器重新发送 HTTP 请求</p><p><img src="http://igoro.com/wordpress/wp-content/uploads/2010/02/image23.png" alt="The browser follows the redirect"></p><p>浏览器现在知道 <code>http://www.facebook.com/</code> 才是应该访问的正确地址，因此它发送了另外一个 <code>GET</code> 请求</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">GET http://www.facebook.com/ HTTP/1.1</span><br><span class="line">Accept: application/x-ms-application, image/jpeg, application/xaml+xml, [...]</span><br><span class="line">Accept-Language: en-US</span><br><span class="line">User-Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; WOW64; [...]</span><br><span class="line">Accept-Encoding: gzip, deflate</span><br><span class="line">Connection: Keep-Alive</span><br><span class="line">Cookie: lsd=XW[...]; c_user=21[...]; x-referer=[...]</span><br><span class="line">Host: www.facebook.com</span><br></pre></td></tr></table></figure><p>header 头的信息和第一次请求相同。</p><h2 id="6-The-server-‘handles’-the-request"><a href="#6-The-server-‘handles’-the-request" class="headerlink" title="6. The server ‘handles’ the request"></a>6. The server ‘handles’ the request</h2><p>服务器处理 HTTP 请求</p><p><img src="http://igoro.com/wordpress/wp-content/uploads/2010/02/image9.png" alt="The server ‘handles’ the request"></p><p>服务端将会接收到 <code>GET</code> 请求，然后加工处理并且返回一个响应信息。</p><p>这看起来像是一个简单的任务，但实际上这里发生了很多有趣的事情 —— 即使是一个像我的博客这样简单的网站也是如此，更不用说像 Facebook 这样大规模可扩展的网站了。</p><h3 id="Web-server-software"><a href="#Web-server-software" class="headerlink" title="Web server software"></a>Web server software</h3><p>web 服务器（如 IIS 或者 Apache）接收到 HTTP 请求然后决定运行哪一个请求处理程序去处理这个请求。一个请求处理程序（由 ASP、.NET、PHP、Ruby 等构建）是一个读取请求和生成 HTML 响应的程序。</p><p>在这个简单的例子中，请求处理程序可以被储存在一个文件中xxx，例如 <code>http://example.com/folder1/page1.aspx</code> 这个 URL 会被映射到 <code>/httpdocs/folder1/page1.aspx</code> 这个文件。web 服务器同样也可以被配置，这样便于手工指定请求处理函数，因此文件 <code>page1.aspx</code> 对应的公开 URL 可以是 <code>http://example.com/folder1/page1</code>。</p><blockquote><p>每一个动态网站都面临一个有意思的难题就是如何储存数据。小型网站通常会有一个 SQL 数据库去储存他们的数据，但是那些储存庞大数据或者拥有很多访客甚至两者兼具的网站，就必须找到一个方法通过多个服务器去将数据分割开。</p></blockquote><h3 id="Request-handler"><a href="#Request-handler" class="headerlink" title="Request handler"></a>Request handler</h3><p>请求处理程序读取请求，以及请求的参数和 <code>cookie</code> 。随后它会读取并且有可能更新一些存储在服务端的数据。然后，程序会生成 HTML 响应</p><h2 id="7-The-server-sends-back-a-HTML-response"><a href="#7-The-server-sends-back-a-HTML-response" class="headerlink" title="7. The server sends back a HTML response"></a>7. The server sends back a HTML response</h2><p>服务器响应请求，返回 HTML 页面</p><p><img src="http://igoro.com/wordpress/wp-content/uploads/2010/02/image10.png" alt="The server sends back a HTML response"></p><p>下面是服务端生成并返回的响应信息：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">HTTP/1.1 200 OK</span><br><span class="line">Cache-Control: private, no-store, no-cache, must-revalidate, post-check=0,</span><br><span class="line">    pre-check=0</span><br><span class="line">Expires: Sat, 01 Jan 2000 00:00:00 GMT</span><br><span class="line">P3P: CP=&quot;DSP LAW&quot;</span><br><span class="line">Pragma: no-cache</span><br><span class="line">Content-Encoding: gzip</span><br><span class="line">Content-Type: text/html; charset=utf-8</span><br><span class="line">X-Cnection: close</span><br><span class="line">Transfer-Encoding: chunked</span><br><span class="line">Date: Fri, 12 Feb 2010 09:05:55 GMT</span><br><span class="line"> </span><br><span class="line">2b3</span><br><span class="line">��������T�n�@����[...]</span><br></pre></td></tr></table></figure><p>响应信息数据大小为 36kb ，xxxxx</p><p>header 中字段 <code>Content-Encoding</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"  </span></span><br><span class="line"><span class="meta">      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">xmlns</span>=<span class="string">"http://www.w3.org/1999/xhtml"</span> <span class="attr">xml:lang</span>=<span class="string">"en"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">lang</span>=<span class="string">"en"</span> <span class="attr">id</span>=<span class="string">"facebook"</span> <span class="attr">class</span>=<span class="string">" no_js"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"Content-type"</span> <span class="attr">content</span>=<span class="string">"text/html; charset=utf-8"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"Content-language"</span> <span class="attr">content</span>=<span class="string">"en"</span> /&gt;</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>除了压缩之外，header 头指定了是否缓存以及如何缓存这个页面，xxx cookie ，隐私信息，等等</p><blockquote><p>注意这里的 header 头中 <code>Content-Type</code> 被设置为 <code>text/html</code> 。header 告知浏览器将响应内容（response content）当做 HTML 渲染，而不是文件进行下载。浏览器将会通过 header 去决定如何解释相应信息，但是也会参考其他因素，比如 URL 扩展内容。</p></blockquote><h2 id="8-The-browser-begins-rendering-the-HTML"><a href="#8-The-browser-begins-rendering-the-HTML" class="headerlink" title="8. The browser begins rendering the HTML"></a>8. The browser begins rendering the HTML</h2><p>浏览器渲染 HTML 页面</p><p><img src="http://igoro.com/wordpress/wp-content/uploads/2010/02/image6.png" alt="The browser begins rendering the HTML"></p><p>在浏览器接受全部的 HTML 文档信息之前，它就已经开始渲染网站了。</p><h2 id="9-The-browser-sends-requests-for-objects-embedded-in-HTML"><a href="#9-The-browser-sends-requests-for-objects-embedded-in-HTML" class="headerlink" title="9. The browser sends requests for objects embedded in HTML"></a>9. The browser sends requests for objects embedded in HTML</h2><p>浏览器请求静态资源，如 css 文件、图片、js 文件</p><p><img src="http://igoro.com/wordpress/wp-content/uploads/2010/02/image11.png" alt="The browser sends requests for objects embedded in HTML"></p><h2 id="10-The-browser-sends-further-asynchronous-AJAX-requests"><a href="#10-The-browser-sends-further-asynchronous-AJAX-requests" class="headerlink" title="10. The browser sends further asynchronous (AJAX) requests"></a>10. The browser sends further asynchronous (AJAX) requests</h2><p>浏览器发送异步请求</p><p><img src="http://igoro.com/wordpress/wp-content/uploads/2010/02/image12.png" alt="The browser sends further asynchronous (AJAX) requests"></p><p>在 Web 2.0 时代，即使在页面渲染完毕，客户端也还是同服务端保持通信。</p><p>例如，Facebook 聊天功能会保持更新你的朋友列表当他们进来或者离开。为了更新你的在记录中的朋友列表，你的浏览器中的 JavaScript 必须向服务端发送一个异步请求。这个异步请求时一个程序化构造的 GET 或者 POST 请求通过一个特殊的 URL。在 Facebook 这个例子中，客户端发送一个 <code>POST</code> 请求指向 <code>http://www.facebook.com/ajax/chat/buddy_list.php</code> ，它去获取一个关于你有哪些朋友在线的列表。</p><p>这个模式有时叫做 <code>AJAX</code> ，代表着 <code>Asynchronous JavaScript And XML</code>，但即使这样也没有一个特殊的理由要求服务端必须把响应格式化为 <code>XML</code> 格式。例如，Facebook 在异步请求响应中返回 JavaScript 代码段。</p><blockquote><p>通过 fiddler 可以查看浏览器发出的异步请求。事实上，你不仅可以被动地观察这些请求，你利用 fiddler 同样也可以修改和发送请求。</p></blockquote><blockquote><p>Facebook chat 提供了一个关于 <code>AJAX</code> 的有趣问题的一个例子：将数据从服务器推送到客户端。因为 <code>HTTP</code> 是一个请求-响应模式的协议，所以服务器不能向客户端发送新的消息。相反，客户端必须每隔几秒钟得到服务端的响应以便于查看是否有新的消息到达。</p><p>长轮询是一个有趣的技巧，它可以减少</p></blockquote><h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p>关于 web 网站中各个部分如何协同工作，希望本文能对你有所启发。</p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;本文翻译自：&lt;a href=&quot;http://igoro.com/archive/what-really-happens-when-you-navigate-to-a-url/#&quot; rel=&quot;external nofollow noopener noreferrer&quot; target=&quot;_blank&quot;&gt;What really happens when you navigate to a URL&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;为方便理解，本文采用意译，如有兴趣，可阅读英文原文&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="oh-my-article" scheme="https://wencaizhang.gitee.io/categories/oh-my-article/"/>
    
      <category term="http" scheme="https://wencaizhang.gitee.io/categories/oh-my-article/http/"/>
    
    
      <category term="interview" scheme="https://wencaizhang.gitee.io/tags/interview/"/>
    
      <category term="http" scheme="https://wencaizhang.gitee.io/tags/http/"/>
    
  </entry>
  
  <entry>
    <title>hexo 基本使用备忘</title>
    <link href="https://wencaizhang.gitee.io/wiki/oh-my-article/blog/hexo-basic-usage/"/>
    <id>https://wencaizhang.gitee.io/wiki/oh-my-article/blog/hexo-basic-usage/</id>
    <published>2018-05-18T12:35:00.000Z</published>
    <updated>2018-12-25T08:02:06.072Z</updated>
    
    <content type="html"><![CDATA[<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><blockquote><p>Hexo 是一个快速、简洁且高效的博客框架。Hexo 使用 Markdown（或其他渲染引擎）解析文章，在几秒内，即可利用靓丽的主题生成静态网页。</p></blockquote><a id="more"></a><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>全局安装 hexo 脚手架：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure></p><h2 id="创建博客"><a href="#创建博客" class="headerlink" title="创建博客"></a>创建博客</h2><p>在 <code>blog</code> 目录下新建一个网站，然后安装 <code>npm</code> 依赖：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo init blog</span><br><span class="line"><span class="built_in">cd</span> blog</span><br><span class="line">npm install</span><br></pre></td></tr></table></figure><h2 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h2><ul><li><p>生成静态网站</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo generate</span><br></pre></td></tr></table></figure></li><li><p>启动服务器</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo server</span><br></pre></td></tr></table></figure></li><li><p>清除缓存文件 (db.json) 和已生成的静态文件 (public)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br></pre></td></tr></table></figure></li><li><p>新建一篇文章</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new [layout] &lt;title&gt;</span><br></pre></td></tr></table></figure></li></ul><h2 id="小Tips"><a href="#小Tips" class="headerlink" title="小Tips"></a>小Tips</h2><p>在 <code>package.json</code> 中自定义 <code>npm scripts</code> 脚本：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">"scripts": &#123;</span><br><span class="line">  "dev": "hexo clean &amp;&amp; hexo g &amp;&amp; hexo s",</span><br><span class="line">"build": "hexo clean &amp;&amp; hexo g &amp;&amp; hexo d"</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><a href="https://hexo.io/zh-cn/docs/" rel="external nofollow noopener noreferrer" target="_blank">Hexo 文档</a></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;简介&quot;&gt;&lt;a href=&quot;#简介&quot; class=&quot;headerlink&quot; title=&quot;简介&quot;&gt;&lt;/a&gt;简介&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;Hexo 是一个快速、简洁且高效的博客框架。Hexo 使用 Markdown（或其他渲染引擎）解析文章，在几秒内，即可利用靓丽的主题生成静态网页。&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="oh-my-article" scheme="https://wencaizhang.gitee.io/categories/oh-my-article/"/>
    
      <category term="blog" scheme="https://wencaizhang.gitee.io/categories/oh-my-article/blog/"/>
    
    
      <category term="hexo" scheme="https://wencaizhang.gitee.io/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>hexo-admin: hexo博客的后台管理工具</title>
    <link href="https://wencaizhang.gitee.io/wiki/oh-my-article/blog/hexo-admin-hexo-background-manage-tool/"/>
    <id>https://wencaizhang.gitee.io/wiki/oh-my-article/blog/hexo-admin-hexo-background-manage-tool/</id>
    <published>2018-05-18T10:01:00.000Z</published>
    <updated>2018-12-25T08:00:32.512Z</updated>
    
    <content type="html"><![CDATA[<h2 id="零、前言"><a href="#零、前言" class="headerlink" title="零、前言"></a>零、前言</h2><blockquote><p>Hexo 是一个快速、简洁且高效的博客框架。Hexo 使用 Markdown（或其他渲染引擎）解析文章，在几秒内，即可利用靓丽的主题生成静态网页。</p></blockquote><p>Hexo 生成静态网站，我们可以很灵活的将其部署在 GitHub Pages 上或者是随便一个静态服务器上。</p><p>但随之带来的一个问题就是无法像 wordpress 一样提供一个后台管理界面。hexo-admin 很好的解决了这一痛点需求。</p><a id="more"></a><h2 id="一、安装"><a href="#一、安装" class="headerlink" title="一、安装"></a>一、安装</h2><h3 id="1-安装-hexo-并创建-blog"><a href="#1-安装-hexo-并创建-blog" class="headerlink" title="1. 安装 hexo 并创建 blog"></a>1. 安装 hexo 并创建 blog</h3><p><em>如已创建则跳过此步骤</em></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo</span><br><span class="line"><span class="built_in">cd</span> ~/</span><br><span class="line">hexo init my-blog</span><br><span class="line"><span class="built_in">cd</span> my-blog</span><br><span class="line">npm install</span><br></pre></td></tr></table></figure><h3 id="2-安装-hexo-admin-并启动服务"><a href="#2-安装-hexo-admin-并启动服务" class="headerlink" title="2. 安装 hexo-admin 并启动服务"></a>2. 安装 hexo-admin 并启动服务</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install --save hexo-admin</span><br><span class="line">hexo server -d</span><br></pre></td></tr></table></figure><p>hexo-admin 管理界面路径为 <code>博客预览地址</code> + <code>admin</code>，即如果你的博客预览地址为 <code>http://localhost:4000/</code> ，则 hexo-admin 管理界面路径为 <code>http://localhost:4000/admin/</code></p><h2 id="二、启用密码保护"><a href="#二、启用密码保护" class="headerlink" title="二、启用密码保护"></a>二、启用密码保护</h2><p>启动 hexo 预览服务之后，进入 <code>http://localhost:4000/admin/</code> 即可直接对博客文章进行修改，也就是说如果你的博客安装在静态服务器上，则别人也有可能通过这个地址，对你的博客进行修改，为了避免这一情况，可以启动密码保护服务。步骤如下：</p><ol><li><p>启动 hexo 服务，打开 hexo-admin 界面，找到  <code>Settings &gt; Setup authentification</code>，如图所示：</p><p> <img src="http://p2btijoky.bkt.clouddn.com/18-5-18/41667201.jpg" alt=""></p></li><li><p>点击进入设置页面，在页面中分别填写 <code>Username</code>, <code>Password</code> 和 <code>Secret</code>，填写完成之后，页面下方会生成一段配置代码。配置代码示例：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># hexo-admin authentification</span></span><br><span class="line"><span class="attr">admin:</span></span><br><span class="line"><span class="attr">  username:</span> <span class="string">username</span></span><br><span class="line"><span class="attr">  password_hash:</span> <span class="string">$2a$10$sTyd76sSKai3FGnSYgi4cO6ibhFaJDMbTXx3dja7SRPh1m1hXN8za</span></span><br><span class="line"><span class="attr">  secret:</span> <span class="string">secret</span></span><br></pre></td></tr></table></figure></li><li><p>将这段代码复制到根目录配置文件 <code>_config.yml</code> 中，然后重启 hexo 服务，再次进入 hexo-admin 界面时就需要使用前面设置的用户名和密码进行登录了。</p><p> <img src="http://p2btijoky.bkt.clouddn.com/18-5-18/32546895.jpg" alt=""></p></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;零、前言&quot;&gt;&lt;a href=&quot;#零、前言&quot; class=&quot;headerlink&quot; title=&quot;零、前言&quot;&gt;&lt;/a&gt;零、前言&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;Hexo 是一个快速、简洁且高效的博客框架。Hexo 使用 Markdown（或其他渲染引擎）解析文章，在几秒内，即可利用靓丽的主题生成静态网页。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Hexo 生成静态网站，我们可以很灵活的将其部署在 GitHub Pages 上或者是随便一个静态服务器上。&lt;/p&gt;
&lt;p&gt;但随之带来的一个问题就是无法像 wordpress 一样提供一个后台管理界面。hexo-admin 很好的解决了这一痛点需求。&lt;/p&gt;
    
    </summary>
    
      <category term="oh-my-article" scheme="https://wencaizhang.gitee.io/categories/oh-my-article/"/>
    
      <category term="blog" scheme="https://wencaizhang.gitee.io/categories/oh-my-article/blog/"/>
    
    
      <category term="hexo" scheme="https://wencaizhang.gitee.io/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>JavaScript 序列化与反序列化</title>
    <link href="https://wencaizhang.gitee.io/wiki/oh-my-article/js/serialize-and-unserialize-of-javascript/"/>
    <id>https://wencaizhang.gitee.io/wiki/oh-my-article/js/serialize-and-unserialize-of-javascript/</id>
    <published>2018-03-02T02:51:00.000Z</published>
    <updated>2018-12-25T07:48:43.473Z</updated>
    
    <content type="html"><![CDATA[<h2 id="一、-param"><a href="#一、-param" class="headerlink" title="一、$.param()"></a>一、$.param()</h2><p><code>param()</code> 方法创建数组或对象的序列化表示。该序列化值可在进行 AJAX 请求时在 URL 查询字符串中使用。</p><a id="more"></a><h3 id="1-使用示例"><a href="#1-使用示例" class="headerlink" title="1. 使用示例"></a>1. 使用示例</h3><p>示例一：序列化目标是对象</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 假设已经引入 jquery.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj = &#123; <span class="attr">username</span>: <span class="string">'zwc'</span> , <span class="attr">age</span>: <span class="number">18</span> &#125;;</span><br><span class="line"><span class="keyword">var</span> querystring = $.param(obj);</span><br><span class="line"><span class="built_in">console</span>.log(querystring);</span><br><span class="line"><span class="comment">// "username=zwc&amp;age=18"</span></span><br></pre></td></tr></table></figure><p>示例二：序列化目标数据结构深层嵌套</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 假设已经引入 jquery.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> myObject = &#123;</span><br><span class="line">  a: &#123;</span><br><span class="line">    one: <span class="number">1</span>, </span><br><span class="line">    two: <span class="number">2</span>, </span><br><span class="line">    three: <span class="number">3</span></span><br><span class="line">  &#125;, </span><br><span class="line">  b: [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> recursiveEncoded = $.param(myObject);</span><br><span class="line"><span class="keyword">var</span> recursiveDecoded = <span class="built_in">decodeURIComponent</span>($.param(myObject));</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(recursiveEncoded);</span><br><span class="line"><span class="comment">// "a%5Bone%5D=1&amp;a%5Btwo%5D=2&amp;a%5Bthree%5D=3&amp;b%5B%5D=1&amp;b%5B%5D=2&amp;b%5B%5D=3"</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(recursiveDecoded);</span><br><span class="line"><span class="comment">// "a[one]=1&amp;a[two]=2&amp;a[three]=3&amp;b[]=1&amp;b[]=2&amp;b[]=3"</span></span><br></pre></td></tr></table></figure><p>示例三：序列化目标是数组</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 假设已经引入 jquery.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr = [</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">'username'</span>, <span class="attr">value</span>: <span class="string">'zwc'</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">'age'</span>, <span class="attr">value</span>: <span class="number">18</span> &#125;</span><br><span class="line">];</span><br><span class="line"><span class="keyword">var</span> querystring = $.param(arr);</span><br><span class="line"><span class="built_in">console</span>.log(querystring);</span><br><span class="line"><span class="comment">// "username=zwc&amp;age=18"</span></span><br></pre></td></tr></table></figure><h3 id="2-模拟-param"><a href="#2-模拟-param" class="headerlink" title="2. 模拟 $.param()"></a>2. 模拟 $.param()</h3><p>根据 <a href="#1-使用示例">使用示例</a> 模拟出代码的实现过程。暂时先不考虑边界值，即方法调用时传入的都是合法参数（参照示例中的参数）。</p><h4 id="i-第一版"><a href="#i-第一版" class="headerlink" title="i 第一版"></a>i 第一版</h4><p>针对 <a href="#1-使用示例">使用示例</a> 中<strong>示例一</strong>进行模拟</p><p>// 方法定义<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">param</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> target = <span class="built_in">arguments</span>[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">var</span> str = <span class="string">''</span>;</span><br><span class="line">    <span class="keyword">if</span> (!target) <span class="keyword">return</span> <span class="string">''</span>;</span><br><span class="line">    <span class="keyword">if</span> (target <span class="keyword">instanceof</span> <span class="built_in">Object</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (key <span class="keyword">in</span> target) &#123;</span><br><span class="line">            <span class="keyword">if</span> (target.hasOwnProperty(key)) &#123;</span><br><span class="line">                str += key + <span class="string">'='</span> + target[key];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> str;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>// 测试代码<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123; <span class="attr">username</span>: <span class="string">'zwc'</span> , <span class="attr">age</span>: <span class="number">18</span> &#125;;</span><br><span class="line"><span class="keyword">var</span> querystring = param(obj);</span><br><span class="line"><span class="built_in">console</span>.log(querystring);</span><br><span class="line"><span class="comment">// "username=zwcage=18"</span></span><br></pre></td></tr></table></figure></p><h4 id="ii-第二版"><a href="#ii-第二版" class="headerlink" title="ii 第二版"></a>ii 第二版</h4><p>针对 <a href="#1-使用示例">使用示例</a> 中<strong>示例一</strong>进行模拟</p><p>// 方法定义<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">param</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> target = <span class="built_in">arguments</span>[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">var</span> str = <span class="string">''</span>;</span><br><span class="line">    <span class="keyword">if</span> (!target) <span class="keyword">return</span> str;</span><br><span class="line">    <span class="keyword">if</span> (target <span class="keyword">instanceof</span> <span class="built_in">Object</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (key <span class="keyword">in</span> target) &#123;</span><br><span class="line">            <span class="keyword">if</span> (target.hasOwnProperty(key)) &#123;</span><br><span class="line">                <span class="keyword">if</span> (target[key] <span class="keyword">instanceof</span> <span class="built_in">Object</span>) &#123;</span><br><span class="line">                    <span class="keyword">var</span> tmp = target[key];</span><br><span class="line">                    <span class="keyword">for</span> (k <span class="keyword">in</span> tmp) &#123;</span><br><span class="line">                        str += key + <span class="string">'['</span> + k +<span class="string">']='</span> + tmp[k];</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (target[key] <span class="keyword">instanceof</span> <span class="built_in">Array</span>) &#123;</span><br><span class="line">                    <span class="keyword">var</span> tmp = target[key];</span><br><span class="line">                    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; tmp.length; i++) &#123;</span><br><span class="line">                        str += key + <span class="string">'[]='</span> + tmp[i];</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    str += key + <span class="string">'='</span> + target[key];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> str;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (target <span class="keyword">instanceof</span> <span class="built_in">Array</span>) &#123;</span><br><span class="line">        </span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>// 测试代码<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></p><h4 id="iii-第三版"><a href="#iii-第三版" class="headerlink" title="iii 第三版"></a>iii 第三版</h4><p>这一次把更复杂的情况考虑进去，也就是递归。</p><p>// 方法定义<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">param</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> target = <span class="built_in">arguments</span>[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">var</span> str = <span class="string">''</span>;</span><br><span class="line">    <span class="keyword">if</span> (!target) <span class="keyword">return</span> str;</span><br><span class="line">    <span class="keyword">if</span> (target <span class="keyword">instanceof</span> <span class="built_in">Object</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (key <span class="keyword">in</span> target) &#123;</span><br><span class="line">            <span class="keyword">var</span> value = target[key];</span><br><span class="line">            <span class="keyword">if</span> (value <span class="keyword">instanceof</span> <span class="built_in">Object</span> || value <span class="keyword">instanceof</span> <span class="built_in">Array</span>) &#123;</span><br><span class="line">                paramObj(key, value);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                str += <span class="string">'&amp;'</span> + key + <span class="string">'='</span> + value;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">paramObj</span> (<span class="params">key, value</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (k <span class="keyword">in</span> value) &#123;</span><br><span class="line">            <span class="keyword">var</span> temp = value[k];</span><br><span class="line">            <span class="keyword">var</span> tempKey = value <span class="keyword">instanceof</span> <span class="built_in">Object</span> ? key + <span class="string">'['</span> + k +<span class="string">']'</span> : key + <span class="string">'[]'</span>;</span><br><span class="line">            <span class="keyword">if</span> (temp <span class="keyword">instanceof</span> <span class="built_in">Object</span> || temp <span class="keyword">instanceof</span> <span class="built_in">Array</span>) &#123;</span><br><span class="line">                paramObj(tempKey, temp)</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                str += <span class="string">'&amp;'</span> + tempKey + <span class="string">'='</span> + temp;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">encodeURIComponent</span>(str.slice(<span class="number">1</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>// 测试代码<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myObject = &#123;</span><br><span class="line">  a: &#123;</span><br><span class="line">    one: <span class="number">1</span>, </span><br><span class="line">    two: <span class="number">2</span>, </span><br><span class="line">    three: &#123; <span class="attr">name</span>: <span class="string">'jack'</span>, <span class="attr">age</span>: <span class="number">18</span> &#125;</span><br><span class="line">  &#125;, </span><br><span class="line">  b: [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> recursiveEncoded = param(myObject);</span><br><span class="line"><span class="keyword">var</span> recursiveDecoded = <span class="built_in">decodeURIComponent</span>(param(myObject));</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(recursiveEncoded);</span><br><span class="line"><span class="comment">// a%5Bone%5D%3D1%26a%5Btwo%5D%3D2%26a%5Bthree%5D%5Bname%5D%3Djack%26a%5Bthree%5D%5Bage%5D%3D18%26b%5B0%5D%3D1%26b%5B1%5D%3D2%26b%5B2%5D%3D3</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(recursiveDecoded);</span><br><span class="line"><span class="comment">// "a[one]=1&amp;a[two]=2&amp;a[three]=3&amp;b[]=1&amp;b[]=2&amp;b[]=3"</span></span><br></pre></td></tr></table></figure></p><h2 id="二、-serializeArray"><a href="#二、-serializeArray" class="headerlink" title="二、$.serializeArray()"></a>二、$.serializeArray()</h2><h2 id="三、-serialize"><a href="#三、-serialize" class="headerlink" title="三、$.serialize()"></a>三、$.serialize()</h2>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;一、-param&quot;&gt;&lt;a href=&quot;#一、-param&quot; class=&quot;headerlink&quot; title=&quot;一、$.param()&quot;&gt;&lt;/a&gt;一、$.param()&lt;/h2&gt;&lt;p&gt;&lt;code&gt;param()&lt;/code&gt; 方法创建数组或对象的序列化表示。该序列化值可在进行 AJAX 请求时在 URL 查询字符串中使用。&lt;/p&gt;
    
    </summary>
    
      <category term="oh-my-article" scheme="https://wencaizhang.gitee.io/categories/oh-my-article/"/>
    
      <category term="js" scheme="https://wencaizhang.gitee.io/categories/oh-my-article/js/"/>
    
    
      <category term="javascript" scheme="https://wencaizhang.gitee.io/tags/javascript/"/>
    
      <category term="jQuery" scheme="https://wencaizhang.gitee.io/tags/jQuery/"/>
    
  </entry>
  
  <entry>
    <title>调教你的Xshell</title>
    <link href="https://wencaizhang.gitee.io/wiki/oh-my-article/tool/config-your-xshell/"/>
    <id>https://wencaizhang.gitee.io/wiki/oh-my-article/tool/config-your-xshell/</id>
    <published>2018-01-17T15:05:00.000Z</published>
    <updated>2018-12-25T07:48:43.473Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Xshell"><a href="#Xshell" class="headerlink" title="Xshell"></a>Xshell</h3><p>xshell是一款知名终端模拟软件，个人用户免费，中文界面，方便好用。</p><p>但是一些默认设置需要手动调整之后才更顺手更好用。</p><a id="more"></a><h3 id="打开选项窗口"><a href="#打开选项窗口" class="headerlink" title="打开选项窗口"></a>打开选项窗口</h3><p>如图所示：工具 -&gt; 选项即可打开选项窗口<br><img src="http://p2btijoky.bkt.clouddn.com/18-1-17/39941105.jpg" alt=""></p><h3 id="将选中的文本自动复制到剪贴板（左键选中自动复制）"><a href="#将选中的文本自动复制到剪贴板（左键选中自动复制）" class="headerlink" title="将选中的文本自动复制到剪贴板（左键选中自动复制）"></a>将选中的文本自动复制到剪贴板（左键选中自动复制）</h3><p>如图所示，在“键盘和鼠标”选项卡中勾选对应选项即可：<br><img src="http://p2btijoky.bkt.clouddn.com/18-1-17/65171353.jpg" alt=""></p><h3 id="右键设置"><a href="#右键设置" class="headerlink" title="右键设置"></a>右键设置</h3><p>如图所示，设置右键和中键的功能，其中下拉选项的含义如下：</p><table><thead><tr><th>选项</th><th style="text-align:center">蹩脚翻译</th></tr></thead><tbody><tr><td>Do nothing</td><td style="text-align:center">什么都不做</td></tr><tr><td>Open the popup menu</td><td style="text-align:center">打开弹出式菜单</td></tr><tr><td>Paste the clipboard contents</td><td style="text-align:center">粘贴剪切板的内容</td></tr><tr><td>Open Properties dialog</td><td style="text-align:center">打开属性窗口</td></tr><tr><td>Send carriage return</td><td style="text-align:center">发送回车</td></tr><tr><td>Paste the selected text</td><td style="text-align:center">粘贴被选中的文本</td></tr></tbody></table><p><img src="http://p2btijoky.bkt.clouddn.com/18-1-17/7123508.jpg" alt=""></p><p>我的选择是，中键打开弹出式菜单，右键粘贴剪切板的内容</p><h3 id="Ctrl-C-复制"><a href="#Ctrl-C-复制" class="headerlink" title="Ctrl + C 复制"></a><code>Ctrl + C</code> 复制</h3><p><code>Ctrl + C</code> 常用于结束正在进行中的命令，另外<br>在设置了左键选中自动复制之后，也就不需要再额外设置复制的快捷键了。</p><h3 id="Ctrl-V-粘贴"><a href="#Ctrl-V-粘贴" class="headerlink" title="Ctrl + V 粘贴"></a><code>Ctrl + V</code> 粘贴</h3><ol><li><p>键盘和鼠标选项卡 -&gt; 编辑按钮<br><img src="http://p2btijoky.bkt.clouddn.com/18-1-17/13626882.jpg" alt=""></p></li><li><p>新建按钮<br><img src="http://p2btijoky.bkt.clouddn.com/18-1-17/94066364.jpg" alt=""></p></li><li><p>同时按下 <code>Ctrl</code> 和 <code>V</code> 会自动进入编辑面板<br><img src="http://p2btijoky.bkt.clouddn.com/18-1-17/89009725.jpg" alt=""></p></li><li><p><code>类型</code> 选择<code>菜单</code>，操作选择 <code>[编辑] 粘贴</code><br><img src="http://p2btijoky.bkt.clouddn.com/18-1-17/45371351.jpg" alt=""></p></li><li><p>最后点击确定即可</p></li></ol><h3 id="设置字体大小和配色方案"><a href="#设置字体大小和配色方案" class="headerlink" title="设置字体大小和配色方案"></a>设置字体大小和配色方案</h3><ol><li><p>文件 -&gt; 属性，或者使用快捷键 <code>Alt + P</code> 打开属性窗口<br><img src="http://p2btijoky.bkt.clouddn.com/18-1-18/76087715.jpg" alt=""></p></li><li><p>点击左测外观，然后在右侧进行设置<br><img src="http://p2btijoky.bkt.clouddn.com/18-1-18/72432945.jpg" alt=""></p></li><li><p>最后点击确定即可</p></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;Xshell&quot;&gt;&lt;a href=&quot;#Xshell&quot; class=&quot;headerlink&quot; title=&quot;Xshell&quot;&gt;&lt;/a&gt;Xshell&lt;/h3&gt;&lt;p&gt;xshell是一款知名终端模拟软件，个人用户免费，中文界面，方便好用。&lt;/p&gt;
&lt;p&gt;但是一些默认设置需要手动调整之后才更顺手更好用。&lt;/p&gt;
    
    </summary>
    
      <category term="oh-my-article" scheme="https://wencaizhang.gitee.io/categories/oh-my-article/"/>
    
      <category term="tool" scheme="https://wencaizhang.gitee.io/categories/oh-my-article/tool/"/>
    
    
      <category term="linux" scheme="https://wencaizhang.gitee.io/tags/linux/"/>
    
      <category term="tool" scheme="https://wencaizhang.gitee.io/tags/tool/"/>
    
      <category term="xshell" scheme="https://wencaizhang.gitee.io/tags/xshell/"/>
    
  </entry>
  
  <entry>
    <title>小tips-使用正则获取查询字符串参数</title>
    <link href="https://wencaizhang.gitee.io/wiki/oh-my-article/js/parse-querystring/"/>
    <id>https://wencaizhang.gitee.io/wiki/oh-my-article/js/parse-querystring/</id>
    <published>2018-01-17T13:39:00.000Z</published>
    <updated>2018-12-25T07:48:43.365Z</updated>
    
    <content type="html"><![CDATA[<h2 id="一、什么是查询字符串"><a href="#一、什么是查询字符串" class="headerlink" title="一、什么是查询字符串"></a>一、什么是查询字符串</h2><p>大部分开发者都应当对“查询字符串”不陌生，它随处可见。</p><p>例如，当我们用百度搜索关键字 <code>regexp</code> 时，地址栏中 <code>?</code> 后面的字符串就叫查询字符串。</p><p><img src="http://p2btijoky.bkt.clouddn.com/18-1-17/49356156.jpg" alt="百度搜索 regexp"></p><p>也就是说，<code>https://www.baidu.com/s?ie=UTF-8&amp;wd=regexp</code> 中的 <code>ie=UTF-8&amp;wd=regexp</code> 就是查询字符串。</p><a id="more"></a><p>使用查询字符串的场景随处可见，如上面的网页地址中的查询字符串，还有 <code>HTTP</code> 协议中的 <code>GET</code> 请求也是将参数拼接成查询字符串的形式。</p><p><img src="http://p2btijoky.bkt.clouddn.com/18-1-17/93443448.jpg" alt="GET 请求中将参数拼接成查询字符串"></p><h2 id="二、解析查询字符串"><a href="#二、解析查询字符串" class="headerlink" title="二、解析查询字符串"></a>二、解析查询字符串</h2><p>前端开发过程中，通过查询字符串传递参数是一个常见的场景。那么就需要这么一个操作查询字符串的处理：从 url 中获取查询字符串，然后将查询字符串解析成方便处理的 <code>json</code> 对象。</p><p>获取查询字符串并打印：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 假设此时的 URL 是：https://www.baidu.com/s?ie=UTF-8&amp;wd=regexp</span></span><br><span class="line"><span class="keyword">var</span> querystring = <span class="built_in">window</span>.location.search.slice(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(querystring);  </span><br><span class="line"><span class="comment">// "ie=UTF-8&amp;wd=regexp"</span></span><br></pre></td></tr></table></figure><p><code>location</code> 挂载在全局对象 <code>window</code> 上，其属性 <code>search</code> 指的是 URL 中问号 <code>?</code> 之后的部分（包含 <code>?</code>），即 <code>?ie=UTF-8&amp;wd=regexp</code>，通过 <code>String.prototype.slice()</code> 提取其中除 <code>?</code> 之外所有内容，即可得到查询字符串。</p><p>下面是将查询字符串解析成 <code>json</code> 对象的几种思路。</p><h3 id="方法一：split"><a href="#方法一：split" class="headerlink" title="方法一：split"></a>方法一：split</h3><ol><li>通过 <code>split</code> 方法，指定 <code>&amp;</code> 为分隔符，得到处理后的数组 <code>[&quot;ie=UTF-8&quot;, &quot;wd=regexp&quot;]</code> </li><li>遍历数组，同样通过 <code>split</code> 方法，指定 <code>=</code> 为分隔符，得到 <code>[&quot;ie&quot;, &quot;UTF-8&quot;]</code> 和 <code>[&quot;wd&quot;, &quot;regexp&quot;]</code></li><li>遍历获取的数组中第一项则为键，第二项为对应的值，赋值给 <code>json</code></li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> querystring = <span class="built_in">window</span>.location.search.slice(<span class="number">1</span>);  <span class="comment">// "ie=UTF-8&amp;wd=regexp"</span></span><br><span class="line"><span class="keyword">var</span> json = parse(querystring);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(json);</span><br><span class="line"><span class="comment">// &#123;ie: "UTF-8", wd: "regexp"&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">parse</span> (<span class="params">querystring</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> querystring = querystring || <span class="string">''</span>;</span><br><span class="line">    <span class="keyword">var</span> queryArray = querystring.split(<span class="string">'&amp;'</span>);  <span class="comment">// ["ie=UTF-8", "wd=regexp"]</span></span><br><span class="line">    <span class="keyword">var</span> json = &#123;&#125;;</span><br><span class="line">    queryArray.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">item, index</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> tmp = item.split(<span class="string">'='</span>);</span><br><span class="line">        <span class="comment">// ["ie", "UTF-8"]</span></span><br><span class="line">        <span class="comment">// ["wd", "regexp"]</span></span><br><span class="line">        json[tmp[<span class="number">0</span>]] = tmp[<span class="number">1</span>];</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> json</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="方法二：replace-regexp"><a href="#方法二：replace-regexp" class="headerlink" title="方法二：replace + regexp"></a>方法二：replace + regexp</h3><p>先上代码：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> querystring = <span class="built_in">window</span>.location.search.slice(<span class="number">1</span>);</span><br><span class="line">parse(querystring);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">parse</span> (<span class="params">querystring</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> querystring = querystring || <span class="string">''</span>;</span><br><span class="line">    <span class="keyword">var</span> reg = <span class="regexp">/([^=&amp;]+)=([^=&amp;]*)/ig</span>;</span><br><span class="line">    <span class="keyword">var</span> json = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">    querystring.replace(reg, <span class="function"><span class="keyword">function</span> (<span class="params">match, $<span class="number">1</span>, $<span class="number">2</span></span>) </span>&#123;</span><br><span class="line">        json[$<span class="number">1</span>] = $<span class="number">2</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> json;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><ol><li>利用字符串的 <code>replace</code> 方法，如果第一个参数是正则表达式， 并且其为全局匹配模式，同时第二个参数是一个函数，那么每次匹配到的时候，这个函数都会被调用。</li><li>正则 <code>/([^=&amp;]+)=([^=&amp;]*)/ig</code> 的含义为，使用 <code>=</code> 连接，且 <code>=</code> 前后的字符串都不能以 <code>=</code> 或者 <code>&amp;</code> 开头。<br><img src="http://p2btijoky.bkt.clouddn.com/18-1-17/36485402.jpg" alt=""></li></ol><p><strong>function 参数含义：</strong></p><ol><li>匹配字符串</li><li>正则表达式分组内容，没有分组则没有该参数</li><li>匹配项在字符串中的 <code>index</code></li><li>原字符串</li></ol><table><thead><tr><th></th><th><code>match</code></th><th><code>$1</code></th><th><code>$2</code></th><th><code>index</code></th><th><code>origin</code></th></tr></thead><tbody><tr><td>第一次</td><td><code>ie=UTF-8</code></td><td><code>ie</code></td><td><code>UTF-8</code></td><td><code>0</code></td><td><code>ie=UTF-8&amp;wd=regexp</code></td></tr><tr><td>第二次</td><td><code>wd=regexp</code></td><td><code>wd</code></td><td><code>regexp</code></td><td><code>9</code></td><td><code>ie=UTF-8&amp;wd=regexp</code></td></tr></tbody></table><h3 id="正则表达式的含义"><a href="#正则表达式的含义" class="headerlink" title="正则表达式的含义"></a>正则表达式的含义</h3><ul><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/split" rel="external nofollow noopener noreferrer" target="_blank">String.prototype.split() · MDN</a></li><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/slice" rel="external nofollow noopener noreferrer" target="_blank">String.prototype.slice() · MDN</a></li><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/replace" rel="external nofollow noopener noreferrer" target="_blank">String.prototype.replace() · MDN</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;一、什么是查询字符串&quot;&gt;&lt;a href=&quot;#一、什么是查询字符串&quot; class=&quot;headerlink&quot; title=&quot;一、什么是查询字符串&quot;&gt;&lt;/a&gt;一、什么是查询字符串&lt;/h2&gt;&lt;p&gt;大部分开发者都应当对“查询字符串”不陌生，它随处可见。&lt;/p&gt;
&lt;p&gt;例如，当我们用百度搜索关键字 &lt;code&gt;regexp&lt;/code&gt; 时，地址栏中 &lt;code&gt;?&lt;/code&gt; 后面的字符串就叫查询字符串。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://p2btijoky.bkt.clouddn.com/18-1-17/49356156.jpg&quot; alt=&quot;百度搜索 regexp&quot;&gt;&lt;/p&gt;
&lt;p&gt;也就是说，&lt;code&gt;https://www.baidu.com/s?ie=UTF-8&amp;amp;wd=regexp&lt;/code&gt; 中的 &lt;code&gt;ie=UTF-8&amp;amp;wd=regexp&lt;/code&gt; 就是查询字符串。&lt;/p&gt;
    
    </summary>
    
      <category term="oh-my-article" scheme="https://wencaizhang.gitee.io/categories/oh-my-article/"/>
    
      <category term="js" scheme="https://wencaizhang.gitee.io/categories/oh-my-article/js/"/>
    
    
      <category term="javascript" scheme="https://wencaizhang.gitee.io/tags/javascript/"/>
    
      <category term="querystring" scheme="https://wencaizhang.gitee.io/tags/querystring/"/>
    
      <category term="regexp" scheme="https://wencaizhang.gitee.io/tags/regexp/"/>
    
  </entry>
  
  <entry>
    <title>小tips - iframe 高度自适应</title>
    <link href="https://wencaizhang.gitee.io/wiki/oh-my-article/js/iframe-height-auto/"/>
    <id>https://wencaizhang.gitee.io/wiki/oh-my-article/js/iframe-height-auto/</id>
    <published>2018-01-17T13:39:00.000Z</published>
    <updated>2018-12-25T07:48:43.197Z</updated>
    
    <content type="html"><![CDATA[<h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p><code>iframe</code> 有两大烦人的东西，一是 <code>iframe</code> 高度问题，二是带遮罩的弹框提示。这两个问题都没什么处理经验，于是花点时间研究，基本实现了效果，于是记录下来以便备忘。</p><p>本文为高度自适应问题的解决方案。</p><a id="more"></a><h2 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h2><p>此方法前提条件：为方便获取 <code>iframe</code> 元素，需要知道该 <code>iframe</code> 的 <code>id</code>（当页面只有一个 <code>iframe</code> 元素时，使用类名或标签名也可以）。</p><p>此处假设 <code>iframe</code> 元素的 id 为 <code>iframe</code>。</p><p>为行文方便，后面将 <code>iframe</code> 元素指定的页面称为“子窗口或子页面”， <code>iframe</code> 元素所在的页面称为“父窗口”</p><h3 id="jQuery-版"><a href="#jQuery-版" class="headerlink" title="jQuery 版"></a>jQuery 版</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">resizeIframeParentHeight</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  $(<span class="string">"#iframe"</span>, <span class="built_in">window</span>.parent.document).css(<span class="string">'height'</span>, $(<span class="string">'body'</span>).outerHeight());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li>此方法在子窗口中，在初次加载完成或者页面高度发生变化时执行</li><li><code>$(&quot;#iframe&quot;, window.parent.document)</code> 获取父窗口中的 <code>iframe</code> 元素</li><li><code>$(&#39;body&#39;).outerHeight()</code> 获取 <code>iframe</code> 元素指定页面的高度</li></ol><h3 id="js-版"><a href="#js-版" class="headerlink" title="js 版"></a>js 版</h3><p>您可以狠狠点击这里：<a href="http://demo.wencaizhang.com/pages/iframe-parent.html" rel="external nofollow noopener noreferrer" target="_blank">js版iframe高度自适应demo</a></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">resizeIframeParentHeight</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> iframeHeight = <span class="built_in">document</span>.body.scrollHeight;</span><br><span class="line">  <span class="keyword">var</span> iframe = <span class="built_in">window</span>.parent.document.getElementById(<span class="string">'iframe'</span>);</span><br><span class="line">  iframe.style.height = iframeHeight + <span class="string">'px'</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li>此方法在子窗口中，在初次加载完成或者页面高度发生变化时执行</li><li><code>window.parent</code> 获取父窗口中 <code>document</code> ，则 <code>window.parent.document.getElementById(&#39;iframe&#39;)</code> 获取 <code>iframe</code> 元素</li><li><code>document.body.scrollHeight</code> 获取 <code>iframe</code> 元素指定页面的高度</li></ol>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;背景&quot;&gt;&lt;a href=&quot;#背景&quot; class=&quot;headerlink&quot; title=&quot;背景&quot;&gt;&lt;/a&gt;背景&lt;/h2&gt;&lt;p&gt;&lt;code&gt;iframe&lt;/code&gt; 有两大烦人的东西，一是 &lt;code&gt;iframe&lt;/code&gt; 高度问题，二是带遮罩的弹框提示。这两个问题都没什么处理经验，于是花点时间研究，基本实现了效果，于是记录下来以便备忘。&lt;/p&gt;
&lt;p&gt;本文为高度自适应问题的解决方案。&lt;/p&gt;
    
    </summary>
    
      <category term="oh-my-article" scheme="https://wencaizhang.gitee.io/categories/oh-my-article/"/>
    
      <category term="js" scheme="https://wencaizhang.gitee.io/categories/oh-my-article/js/"/>
    
    
      <category term="javascript" scheme="https://wencaizhang.gitee.io/tags/javascript/"/>
    
      <category term="iframe" scheme="https://wencaizhang.gitee.io/tags/iframe/"/>
    
  </entry>
  
  <entry>
    <title>小tips - 利用 localStorage 记住用户名和密码</title>
    <link href="https://wencaizhang.gitee.io/wiki/oh-my-article/js/remember-password-by-localStorage/"/>
    <id>https://wencaizhang.gitee.io/wiki/oh-my-article/js/remember-password-by-localStorage/</id>
    <published>2018-01-16T09:35:00.000Z</published>
    <updated>2018-12-25T07:48:43.365Z</updated>
    
    <content type="html"><![CDATA[<h2 id="一、问题背景"><a href="#一、问题背景" class="headerlink" title="一、问题背景"></a>一、问题背景</h2><p>对于一个登录页面，通常都要支持的一个功能是记住密码，这样下次打开时就不需要重新输入，可以很好的提高用户体验。</p><p>在对比了 <code>cookie</code> 和 <code>localStorage</code> 之后，我选择了 <code>localStorage</code> 用于存储用户登录信息。</p><a id="more"></a><ol><li><p><code>cookie</code></p><ul><li>所有浏览器都支持，无兼容问题</li><li>大小限制：4k 左右</li><li>可设置失效时间</li><li><p><code>cookie</code> 会被附加到每个 HTTP 请求中</p><p><img src="http://p2btijoky.bkt.clouddn.com/18-1-16/99013211.jpg" alt="cookie 会附加在每个 HTTP 请求中"></p></li></ul></li><li><p><code>localStorage</code>:</p><ul><li>IE8+ （现在项目也基本都不要求兼容 IE6~7 了，因此可以放心使用）</li><li>大小限制：一般 5MB</li><li>仅在客户端中保存，不参与和服务器的通信</li><li>需手动清除，否则永远有效</li></ul></li></ol><p><em><code>sessionStorage</code> 和 <code>localStorage</code> 基本只有一点不同：<code>sessionStorage</code> 是基于会话的，页面关闭或浏览器关闭后失效</em></p><h2 id="二、demo-展示"><a href="#二、demo-展示" class="headerlink" title="二、demo 展示"></a>二、demo 展示</h2><p>实际的登录页面可能还需要注册，所以就单独做了一个高保真的 demo 页面。</p><p>您可以狠狠地点击这里：<a href="https://wencaizhang.github.io/study/pages/remember-pwd-by-localStorage.html" rel="external nofollow noopener noreferrer" target="_blank">HTML5 localstorage本地存储应用demo</a></p><p>进入 demo 页面，您可以看到两个输入框和一个登录按钮。</p><p><img src="http://p2btijoky.bkt.clouddn.com/18-1-16/94959878.jpg" alt=""></p><p>您可以随心所欲的输入一个狂拽炫酷的用户名和密码，然后点击登录按钮，由于此 demo 仅用于展示记录密码功能，因此页面并无任何提示或跳转。</p><p><em>在真实的场景中，点击按钮时应验证用户名密码，验证通过之后自动跳转到网站其他页面，与本文主题无关，故不做展示</em></p><p>点击登录按钮之后，刷新页面，输入框已经自动填充刷新之前点击按钮时对应的值。</p><p><img src="http://p2btijoky.bkt.clouddn.com/18-1-16/11381239.jpg" alt=""></p><h2 id="三、localStorage-提供的方法"><a href="#三、localStorage-提供的方法" class="headerlink" title="三、localStorage 提供的方法"></a>三、localStorage 提供的方法</h2><p><em>此处只是简单介绍，详细使用请看<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Web_Storage_API/Using_the_Web_Storage_API" rel="external nofollow noopener noreferrer" target="_blank">这里</a></em></p><h3 id="1-设置值"><a href="#1-设置值" class="headerlink" title="1. 设置值"></a>1. 设置值</h3><ul><li>用来创建新数据项和更新已存在的值</li><li>接受两个参数——要创建/修改的数据项的键，和对应的值<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.localStorage.setItem(key, value);</span><br></pre></td></tr></table></figure></li></ul><h3 id="2-获取值"><a href="#2-获取值" class="headerlink" title="2. 获取值"></a>2. 获取值</h3><ul><li>获取一个数据项</li><li>接受数据项的键作为参数，并返回数据值<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.localStorage.getItem(key);</span><br></pre></td></tr></table></figure></li></ul><h3 id="3-删除值"><a href="#3-删除值" class="headerlink" title="3. 删除值"></a>3. 删除值</h3><ul><li>接受一个参数——你想要移除的数据项的键，然后会将对应的数据项从域名对应的存储对象中移除<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.localStorage.removeItem(key);</span><br></pre></td></tr></table></figure></li></ul><h3 id="4-清空域名对应的整个存储对象"><a href="#4-清空域名对应的整个存储对象" class="headerlink" title="4. 清空域名对应的整个存储对象"></a>4. 清空域名对应的整个存储对象</h3><ul><li>不接受参数，只是简单地清空域名对应的整个存储对象<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.localStorage.clear();</span><br></pre></td></tr></table></figure></li></ul><h3 id="5-监听-localStorage-的变化"><a href="#5-监听-localStorage-的变化" class="headerlink" title="5. 监听 localStorage 的变化"></a>5. 监听 <code>localStorage</code> 的变化</h3><ul><li>创建/更新/删除数据项时触发</li><li>重复设置相同的键值不会触发该事件</li><li><code>localStorage.clear()</code> 方法至多触发一次该事件<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">'storage'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// localStorage 发生改变时，事件对象包含了多个有用的属性信息</span></span><br><span class="line">    <span class="built_in">console</span>.log(e.key);          <span class="comment">// 改变的数据项的键</span></span><br><span class="line">    <span class="built_in">console</span>.log(e.oldValue);     <span class="comment">// 改变前的旧值</span></span><br><span class="line">    <span class="built_in">console</span>.log(e.newValue);     <span class="comment">// 改变后的新值</span></span><br><span class="line">    <span class="built_in">console</span>.log(e.url);          <span class="comment">// 改变的存储对象所在的文档的 URL</span></span><br><span class="line">    <span class="built_in">console</span>.log(e.storageArea);  <span class="comment">// 存储对象本身</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li></ul><h2 id="四、具体实现"><a href="#四、具体实现" class="headerlink" title="四、具体实现"></a>四、具体实现</h2><h3 id="1-数据存储"><a href="#1-数据存储" class="headerlink" title="1. 数据存储"></a>1. 数据存储</h3><p>每次用户点击一次登录按钮，记录下当前使用的用户名和密码。例如，放到一个对象中，然后存储之，代码如下：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> userData = &#123;</span><br><span class="line">    username: <span class="string">'张君宝'</span>,</span><br><span class="line">    pwd: <span class="string">'123456'</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">window</span>.localStorage.setItem(<span class="string">'userData'</span>, <span class="built_in">JSON</span>.stringify(userData));</span><br></pre></td></tr></table></figure></p><h3 id="2-数据读取"><a href="#2-数据读取" class="headerlink" title="2. 数据读取"></a>2. 数据读取</h3><p>每次页面加载的时候，将相对应的数据读出来。如下：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> userData = <span class="built_in">window</span>.localStorage.getItem(<span class="string">'userData'</span>);</span><br><span class="line">userData = <span class="built_in">JSON</span>.parse(userData);</span><br></pre></td></tr></table></figure></p><p>需要注意的是：实际上 <code>localStorage</code> 存储的是字符串，因此存储时需要使用 <code>JSON.stringfy()</code> 将其转化成字符串，获取时使用 <code>JSON.parse()</code> 再将其转化为 <code>JSON</code> 格式。</p><h2 id="五、最后"><a href="#五、最后" class="headerlink" title="五、最后"></a>五、最后</h2><p><code>localStorage</code> 使用场景远不止于此，例如同源窗口通信，记录用户使用习惯等。</p><h3 id="更多阅读："><a href="#更多阅读：" class="headerlink" title="更多阅读："></a>更多阅读：</h3><ul><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Web_Storage_API/Using_the_Web_Storage_API" rel="external nofollow noopener noreferrer" target="_blank">使用 Web Storage API</a></li><li><a href="https://iammapping.com/the-other-ways-to-use-localstorage/" rel="external nofollow noopener noreferrer" target="_blank">localStorage 还能这么用</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;一、问题背景&quot;&gt;&lt;a href=&quot;#一、问题背景&quot; class=&quot;headerlink&quot; title=&quot;一、问题背景&quot;&gt;&lt;/a&gt;一、问题背景&lt;/h2&gt;&lt;p&gt;对于一个登录页面，通常都要支持的一个功能是记住密码，这样下次打开时就不需要重新输入，可以很好的提高用户体验。&lt;/p&gt;
&lt;p&gt;在对比了 &lt;code&gt;cookie&lt;/code&gt; 和 &lt;code&gt;localStorage&lt;/code&gt; 之后，我选择了 &lt;code&gt;localStorage&lt;/code&gt; 用于存储用户登录信息。&lt;/p&gt;
    
    </summary>
    
      <category term="oh-my-article" scheme="https://wencaizhang.gitee.io/categories/oh-my-article/"/>
    
      <category term="js" scheme="https://wencaizhang.gitee.io/categories/oh-my-article/js/"/>
    
    
      <category term="javascript" scheme="https://wencaizhang.gitee.io/tags/javascript/"/>
    
      <category term="localStorage" scheme="https://wencaizhang.gitee.io/tags/localStorage/"/>
    
  </entry>
  
  <entry>
    <title>What is GitHub Pages</title>
    <link href="https://wencaizhang.gitee.io/wiki/oh-my-article/other/GitHub-Pages/"/>
    <id>https://wencaizhang.gitee.io/wiki/oh-my-article/other/GitHub-Pages/</id>
    <published>2018-01-09T10:30:53.000Z</published>
    <updated>2018-12-25T07:48:43.222Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>Github Pages 是 Github 的静态页面托管服务。它设计的初衷是为了用户能够直接通过 Github 仓库来托管用户个人、组织或是项目的专属页面。参考：<a href="https://help.github.com/articles/what-is-github-pages/" rel="external nofollow noopener noreferrer" target="_blank">What is GitHub Pages?</a></p></blockquote><p><em>友情提示：使用此功能需要对 git 及 GitHub 有一定了解</em></p><a id="more"></a><h2 id="GitHub-Pages-功能介绍"><a href="#GitHub-Pages-功能介绍" class="headerlink" title="GitHub Pages 功能介绍"></a>GitHub Pages 功能介绍</h2><p>使用步骤：</p><ol><li>注册 GitHub 账户</li><li>创建一个仓库</li><li>打开此仓库的 <code>Settings</code> 页签<br><img src="http://p2btijoky.bkt.clouddn.com/18-1-11/57116092.jpg" alt=""></li><li>找到 <code>GitHub Pages</code> 部分<br><img src="http://p2btijoky.bkt.clouddn.com/18-1-11/59480694.jpg" alt=""></li></ol><p>因为 GitHub Pages 会展示指定位置（分支）的 <code>index.html</code> 或者 <code>README.md</code>，因此 <code>Source</code> 用于指定分支。</p><p><code>Source</code> 字段有 4 个选项：</p><ol><li>默认为 <code>None</code> ，即不显示</li><li><code>master branch</code>，本仓库的 <code>master</code> 分支</li><li><code>master branch/docs folder</code>，本仓库的 <code>master</code> 分支下的 <code>docs</code> 目录</li><li><code>gh-pages branch</code>，本仓库的 <code>gh-pages</code> 分支（需创建后才显示此选项）</li></ol><p>也就是说，只要把静态站点放到上面三个位置（分支）之一，然后设置正确的 <code>Source</code> 字段，即可使用 GitHub Pages 功能。生成的静态网站地址会友好的显示在 <code>Source</code> 字段上方。</p><h2 id="GitHub-Pages-使用思路扩展"><a href="#GitHub-Pages-使用思路扩展" class="headerlink" title="GitHub Pages 使用思路扩展"></a>GitHub Pages 使用思路扩展</h2><ol><li>很多开源项目都会选择将 <code>master branch/docs</code> 用于展示项目使用文档</li><li>制作个人兴趣静态网站（如：<a href="http://wencaizhang.com/demo" rel="external nofollow noopener noreferrer" target="_blank">http://wencaizhang.com/demo</a>)</li><li>作为个人静态博客站点（如：<a href="http://wencaizhang.com/blog" rel="external nofollow noopener noreferrer" target="_blank">http://wencaizhang.com/blog</a>)</li></ol>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;Github Pages 是 Github 的静态页面托管服务。它设计的初衷是为了用户能够直接通过 Github 仓库来托管用户个人、组织或是项目的专属页面。参考：&lt;a href=&quot;https://help.github.com/articles/what-is-github-pages/&quot; rel=&quot;external nofollow noopener noreferrer&quot; target=&quot;_blank&quot;&gt;What is GitHub Pages?&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;em&gt;友情提示：使用此功能需要对 git 及 GitHub 有一定了解&lt;/em&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="oh-my-article" scheme="https://wencaizhang.gitee.io/categories/oh-my-article/"/>
    
      <category term="other" scheme="https://wencaizhang.gitee.io/categories/oh-my-article/other/"/>
    
    
      <category term="other" scheme="https://wencaizhang.gitee.io/tags/other/"/>
    
  </entry>
  
  <entry>
    <title>What is GitHub Pages</title>
    <link href="https://wencaizhang.gitee.io/wiki/oh-my-article/blog/GitHub-Pages/"/>
    <id>https://wencaizhang.gitee.io/wiki/oh-my-article/blog/GitHub-Pages/</id>
    <published>2018-01-09T10:30:53.000Z</published>
    <updated>2018-12-25T07:48:43.601Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>Github Pages 是 Github 的静态页面托管服务。它设计的初衷是为了用户能够直接通过 Github 仓库来托管用户个人、组织或是项目的专属页面。参考：<a href="https://help.github.com/articles/what-is-github-pages/" rel="external nofollow noopener noreferrer" target="_blank">What is GitHub Pages?</a></p></blockquote><p><em>友情提示：使用此功能需要对 git 及 GitHub 有一定了解</em></p><a id="more"></a><h2 id="GitHub-Pages-功能介绍"><a href="#GitHub-Pages-功能介绍" class="headerlink" title="GitHub Pages 功能介绍"></a>GitHub Pages 功能介绍</h2><p>使用步骤：</p><ol><li>注册 GitHub 账户</li><li>创建一个仓库</li><li>打开此仓库的 <code>Settings</code> 页签<br><img src="http://p2btijoky.bkt.clouddn.com/18-1-11/57116092.jpg" alt=""></li><li>找到 <code>GitHub Pages</code> 部分<br><img src="http://p2btijoky.bkt.clouddn.com/18-1-11/59480694.jpg" alt=""></li></ol><p>因为 GitHub Pages 会展示指定位置（分支）的 <code>index.html</code> 或者 <code>README.md</code>，因此 <code>Source</code> 用于指定分支。</p><p><code>Source</code> 字段有 4 个选项：</p><ol><li>默认为 <code>None</code> ，即不显示</li><li><code>master branch</code>，本仓库的 <code>master</code> 分支</li><li><code>master branch/docs folder</code>，本仓库的 <code>master</code> 分支下的 <code>docs</code> 目录</li><li><code>gh-pages branch</code>，本仓库的 <code>gh-pages</code> 分支（需创建后才显示此选项）</li></ol><p>也就是说，只要把静态站点放到上面三个位置（分支）之一，然后设置正确的 <code>Source</code> 字段，即可使用 GitHub Pages 功能。生成的静态网站地址会友好的显示在 <code>Source</code> 字段上方。</p><h2 id="GitHub-Pages-使用思路扩展"><a href="#GitHub-Pages-使用思路扩展" class="headerlink" title="GitHub Pages 使用思路扩展"></a>GitHub Pages 使用思路扩展</h2><ol><li>很多开源项目都会选择将 <code>master branch/docs</code> 用于展示项目使用文档</li><li>制作个人兴趣静态网站（如：<a href="http://wencaizhang.com/demo" rel="external nofollow noopener noreferrer" target="_blank">http://wencaizhang.com/demo</a>)</li><li>作为个人静态博客站点（如：<a href="http://wencaizhang.com/blog" rel="external nofollow noopener noreferrer" target="_blank">http://wencaizhang.com/blog</a>)</li></ol>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;Github Pages 是 Github 的静态页面托管服务。它设计的初衷是为了用户能够直接通过 Github 仓库来托管用户个人、组织或是项目的专属页面。参考：&lt;a href=&quot;https://help.github.com/articles/what-is-github-pages/&quot; rel=&quot;external nofollow noopener noreferrer&quot; target=&quot;_blank&quot;&gt;What is GitHub Pages?&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;em&gt;友情提示：使用此功能需要对 git 及 GitHub 有一定了解&lt;/em&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="oh-my-article" scheme="https://wencaizhang.gitee.io/categories/oh-my-article/"/>
    
      <category term="blog" scheme="https://wencaizhang.gitee.io/categories/oh-my-article/blog/"/>
    
    
      <category term="other" scheme="https://wencaizhang.gitee.io/tags/other/"/>
    
  </entry>
  
  <entry>
    <title>hexo 备份</title>
    <link href="https://wencaizhang.gitee.io/wiki/oh-my-article/blog/hexo-source-backup-and-deploy/"/>
    <id>https://wencaizhang.gitee.io/wiki/oh-my-article/blog/hexo-source-backup-and-deploy/</id>
    <published>2018-01-07T15:01:00.000Z</published>
    <updated>2018-12-25T10:29:00.326Z</updated>
    
    <content type="html"><![CDATA[<h2 id="搭建博客的思路"><a href="#搭建博客的思路" class="headerlink" title="搭建博客的思路"></a>搭建博客的思路</h2><ol><li>使用框架 <code>Hexo</code> <a href="https://hexo.io/zh-cn/docs/" rel="external nofollow noopener noreferrer" target="_blank">文档</a> 将 markdown 文章解析成静态网页</li><li>借助 <code>GitHub Pages</code> 展示静态网页的功能，部署解析出来的静态网页（<a href="/blog/2018/01/09/GitHub-Pages/">hexo 备份</a>）</li></ol><a id="more"></a><h2 id="备份源文件的思路"><a href="#备份源文件的思路" class="headerlink" title="备份源文件的思路"></a>备份源文件的思路</h2><p>  <em>这里写如何备份 markdown 文章源文件，至于详细的搭建步骤请自行百之谷之，不再详述</em></p><p>  <code>GitHub Pages</code> 功能可以展示三个位置的静态网页资源：</p><ol><li><code>master</code> 分支</li><li><code>master</code> 分支的 <code>docs</code> 目录</li><li><p><code>gh-pages</code> 分支</p><p>那么，不妨利用分支功能另外创建一个 <code>source</code> 分支用于管理备份配置文件和博客文章源文件，如果对博客主题进行了自定义，甚至可以再创建一个 <code>theme</code> 分支用于管理主题。</p><p>如此一来，将所有的文件都纳入版本控制系统，无论在哪里都可以快速创建一个相同的博客写作环境</p></li></ol><h2 id="一键部署的思路"><a href="#一键部署的思路" class="headerlink" title="一键部署的思路"></a>一键部署的思路</h2><p>如果按照上面的方法做，每次预览或部署静态网页显得略微有点麻烦：</p><ol><li>预览：删除旧的解析出来的网页（<code>hexo clean</code>），重新解析（<code>hexo g</code>），最后启动本地服务器（<code>hexo s</code>）</li><li>部署静态网页：删除旧的解析出来的网页（<code>hexo clean</code>），重新解析（<code>hexo g</code>），最后部署到 GitHub 上（<code>hexo d</code>）</li><li>提交源文件至 <code>source</code> 分支</li><li>如果修改了主题，还要切换目录并提交主题至 <code>theme</code> 分支</li></ol><p>有木有很麻烦啊！</p><p>但是现在，利用 npm scripts 可以一条命令全部搞定！</p><p>做前端开发的同学可能会对此比较熟悉，在网站根目录下有一个 <code>package.json</code> 文件，里面有个 <code>scripts</code> 字段可用于自定义命令。</p><p>如果对 <code>npm scripts</code> 不太了解的，推荐：<a href="http://www.ruanyifeng.com/blog/2016/10/npm_scripts.html" rel="external nofollow noopener noreferrer" target="_blank">npm scripts 使用指南 · 阮一峰</a></p><p>简单介绍下这段 <code>npm scripts</code> ：</p><ol><li><code>scripts</code> 字段是一个对象。它的每一个属性，对应一段脚本。例如 <code>dev</code> 字段对应的脚本是 <code>hexo clean &amp;&amp; hexo g &amp;&amp; hexo s</code>，命令行中使用 <code>npm run dev</code> 就可以执行这段脚本</li><li><code>&amp;&amp;</code>: 表示前一个任务执行成功，后一个任务才执行，<code>&amp;</code> 则是两个任务同时执行</li><li><code>npm run dev</code>: 主要用于本地预览博客，按照顺序执行 <code>hexo clean</code>、<code>hexo g</code>、<code>hexo s</code>，只有前一个任务执行成功，后一个才执行</li><li><code>npm run push</code>: push 资源文件和静态页面资源</li><li><code>npm run prepush</code>: 使用 <code>hexo</code> 将文章解析成静态页面于 <code>public</code> 目录下，然后将 <code>public</code> 目录重命名为 <code>docs</code></li><li><code>npm run postpush</code>: push <code>theme</code> 分支</li><li>钩子: <code>npm scripts</code> 有 <code>pre</code> 和 <code>post</code> 两个钩子。例如 <code>push</code> 脚本的钩子是 <code>prepush</code> 和 <code>postpush</code>，<code>prepush</code> 在 <code>push</code> 脚本之前执行，<code>postpush</code> 在 <code>push</code> 脚本之后执行。也就是说，执行 <code>npm run push</code> 的时候，会自动按照顺序先后执行 <code>npm run prepush &amp;&amp; npm run push &amp;&amp; npm run postpush</code> 。</li></ol><p>因此，在部署时，只需执行命令 <code>npm run push</code>，会自动部署博客网站，提交 <code>source</code> 和 <code>theme</code> 分支。<br>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"scripts"</span>: &#123;</span><br><span class="line">  <span class="string">"dev"</span>: <span class="string">"hexo clean &amp;&amp; hexo g &amp;&amp; hexo s"</span>,</span><br><span class="line">  <span class="string">"prepush"</span>: <span class="string">"rm -rf docs &amp;&amp; hexo clean &amp;&amp; hexo g &amp;&amp; mv public docs"</span>,</span><br><span class="line">  <span class="string">"push"</span>: <span class="string">"git add -A &amp;&amp; git commit -m publish &amp;&amp; git push origin master"</span>,</span><br><span class="line">  <span class="string">"postpush"</span>: <span class="string">"cd themes/indigo &amp;&amp; git add -A &amp;&amp; git commit -m update &amp;&amp; git push origin theme"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;搭建博客的思路&quot;&gt;&lt;a href=&quot;#搭建博客的思路&quot; class=&quot;headerlink&quot; title=&quot;搭建博客的思路&quot;&gt;&lt;/a&gt;搭建博客的思路&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;使用框架 &lt;code&gt;Hexo&lt;/code&gt; &lt;a href=&quot;https://hexo.io/zh-cn/docs/&quot; rel=&quot;external nofollow noopener noreferrer&quot; target=&quot;_blank&quot;&gt;文档&lt;/a&gt; 将 markdown 文章解析成静态网页&lt;/li&gt;
&lt;li&gt;借助 &lt;code&gt;GitHub Pages&lt;/code&gt; 展示静态网页的功能，部署解析出来的静态网页（&lt;a href=&quot;/blog/2018/01/09/GitHub-Pages/&quot;&gt;hexo 备份&lt;/a&gt;）&lt;/li&gt;
&lt;/ol&gt;
    
    </summary>
    
      <category term="oh-my-article" scheme="https://wencaizhang.gitee.io/categories/oh-my-article/"/>
    
      <category term="blog" scheme="https://wencaizhang.gitee.io/categories/oh-my-article/blog/"/>
    
    
      <category term="hexo" scheme="https://wencaizhang.gitee.io/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>正则表达式</title>
    <link href="https://wencaizhang.gitee.io/wiki/oh-my-article/todoxxx/regexp/"/>
    <id>https://wencaizhang.gitee.io/wiki/oh-my-article/todoxxx/regexp/</id>
    <published>2018-01-02T08:27:53.000Z</published>
    <updated>2018-12-25T07:48:43.531Z</updated>
    
    <content type="html"><![CDATA[<h2 id="元字符"><a href="#元字符" class="headerlink" title="元字符"></a>元字符</h2><p>元字符既可以是放在 <code>[]</code> 中的任意单个字符（如 <code>[a]</code> 表示匹配单个小写字符 <code>a</code> ）</p><p>也可以是字符序列（如 <code>[a-d]</code> 表示匹配 <code>a</code> 、 <code>b</code> 、 <code>c</code> 、 <code>d</code> 之间的任意一个字符，而 <code>\w</code> 表示任意英文字母和数字及下划线）</p><a id="more"></a><p>下面是一些常见的元字符：</p><table><thead><tr><th>元字符</th><th>含义</th></tr></thead><tbody><tr><td><code>.</code></td><td>匹配除 \n 以外的任何字符（注意元字符是小数点）。</td></tr><tr><td><code>[abcde]</code></td><td>匹配 <code>abcde</code> 之中的任意一个字符</td></tr><tr><td><code>[a-h]</code></td><td>匹配 <code>a</code> 到 <code>h</code> 之间的任意一个字符</td></tr><tr><td><code>[^fgh]</code></td><td>不与 <code>fgh</code> 之中的任意一个字符匹配</td></tr><tr><td><code>\w</code></td><td>匹配大小写英文字符及数字 <code>0</code> 到 <code>9</code> 之间的任意一个及下划线，相当于 <code>[a-zA-Z0-9_]</code></td></tr><tr><td><code>\W</code></td><td>不匹配大小写英文字符及数字 <code>0</code> 到 <code>9</code> 之间的任意一个，相当于 <code>[^a-zA-Z0-9_]</code></td></tr><tr><td><code>\s</code></td><td>匹配任何空白字符，相当于 <code>[ \f\n\r\t\v]</code></td></tr><tr><td><code>\S</code></td><td>匹配任何非空白字符，相当于 <code>[^\s]</code></td></tr><tr><td><code>\d</code></td><td>匹配任何 <code>0</code> 到 <code>9</code> 之间的单个数字，相当于 <code>[0-9]</code></td></tr><tr><td><code>\D</code></td><td>不匹配任何 <code>0</code> 到 <code>9</code> 之间的单个数字，相当于 <code>[^0-9]</code></td></tr><tr><td><code>[\u4e00-\u9fa5]</code></td><td>匹配任意单个汉字（这里用的是 <code>Unicode</code> 编码表示汉字的 )</td></tr></tbody></table><h2 id="正则表达式限定符"><a href="#正则表达式限定符" class="headerlink" title="正则表达式限定符"></a>正则表达式限定符</h2><p>上面的元字符都是针对单个字符匹配的，要想同时匹配多个字符的话，还需要借助限定符。</p><p>下面是一些常见的限定符 ( 下表中 <code>n</code> 和 <code>m</code> 都是表示整数，并且 <code>0 &lt; n &lt; m</code>) ： </p><table><thead><tr><th>限定符</th><th>含义</th></tr></thead><tbody><tr><td><code>*</code></td><td>匹配 0 到多个元字符，相当于 <code>{0,}</code></td></tr><tr><td><code>?</code></td><td>匹配 0 到 1 个元字符，相当于 <code>{0,1}</code></td></tr><tr><td><code>+</code></td><td>匹配至少 1 个元字符，相当于 <code>{1,}</code></td></tr><tr><td><code>{n}</code></td><td>匹配 <code>n</code> 个元字符</td></tr><tr><td><code>{n,}</code></td><td>匹配至少 <code>n</code> 个元字符</td></tr><tr><td><code>{n,m}</code></td><td>匹配 <code>n</code> 到 <code>m</code> 个元字符</td></tr><tr><td><code>\b</code></td><td>匹配单词边界</td></tr><tr><td><code>^</code></td><td>字符串必须以指定的字符开始</td></tr><tr><td><code>$</code></td><td>字符串必须以指定的字符结束</td></tr></tbody></table><h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><ol><li><p>由于在正则表达式中<code>\</code>、<code>?</code>、<code>*</code>、<code>^</code>、<code>$</code>、<code>+</code>、<code>(</code>、<code>)</code>、<code>|</code>、<code>{</code>、<code>[</code>等字符已经具有一定特殊意义，如果需要用它们的原始意义，则应该对它进行转义，例如希望在字符串中至少有一个“ \ ”，那么正则表达式应该这么写： \+ 。</p></li><li><p>可以将多个元字符或者原义文本字符用括号括起来形成一个分组，比如 <code>^(13)[4-9]\d{8}$</code> 表示任意以 <code>13</code> 开头的移动手机号码。</p></li><li><p>另外对于中文字符的匹配是采用其对应的 <code>Unicode</code> 编码来匹配的，对于单个 <code>Unicode</code> 字符，如 <code>\u4e00</code> 表示汉字“一”， <code>\u9fa5</code>  表示汉字“龥”，在 <code>Unicode</code> 编码中这分别是所能表示的汉字的第一个和最后一个的 <code>Unicode</code> 编码，在 <code>Unicode</code> 编码中能表示 20901 个汉字。</p></li><li><p>关于 <code>\b</code> 的用法，它代表单词的开始或者结尾，以字符串 <code>123a 345b 456 789d</code> 作为示例字符串，如果正则表达式是 <code>\b\d{3}\b</code>，则仅能匹配 <code>456</code> 。</p></li><li><p>可以使用 <code>|</code> 来表示或的关系，例如 <code>[z|j|q]</code> 表示匹配 <code>z</code> 、 <code>j</code> 、 <code>q</code> 之中的任意一个字母。</p></li><li><p>正则验证工具： <a href="https://regexper.com/" rel="external nofollow noopener noreferrer" target="_blank">https://regexper.com/</a> </p></li></ol><h2 id="正则对象属性"><a href="#正则对象属性" class="headerlink" title="正则对象属性"></a>正则对象属性</h2><blockquote><p>属性均为只读，无法设置其值</p></blockquote><table><thead><tr><th>属性</th><th>含义</th><th>默认值</th></tr></thead><tbody><tr><td><code>global</code></td><td>是否全文搜索</td><td><code>false</code></td></tr><tr><td><code>ignoreCase</code></td><td>是否大小写敏感</td><td><code>false</code></td></tr><tr><td><code>multiline</code></td><td>多行搜索</td><td><code>false</code></td></tr><tr><td><code>lastIndex</code></td><td>是当前表达式匹配内容的最后一个字符的下一个位置</td><td>无</td></tr><tr><td><code>source</code></td><td>正则表达式的文本字符串</td><td>无</td></tr></tbody></table><p>  如下：<br>    <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> reg1 = <span class="regexp">/\w/</span>;</span><br><span class="line"><span class="keyword">var</span> reg2 = <span class="regexp">/\w/gim</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(reg1.global);        <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(reg1.ignoreCase);    <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(reg1.multiline);     <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(reg1.source);        <span class="comment">// "\w"</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(reg2.global);        <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(reg2.ignoreCase);    <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(reg2.multiline);     <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(reg2.source);        <span class="comment">// "\w"</span></span><br></pre></td></tr></table></figure></p><h2 id="正则对象方法"><a href="#正则对象方法" class="headerlink" title="正则对象方法"></a>正则对象方法</h2><h3 id="RegExp-prototype-test-str"><a href="#RegExp-prototype-test-str" class="headerlink" title="RegExp.prototype.test(str)"></a><code>RegExp.prototype.test(str)</code></h3><ul><li>用于测试字符串参数中是否存在匹配正则表达式模式的字符串</li><li><p>如果存在则返回 <code>true</code>，否则返回 <code>false</code></p><p>  牛刀小试：</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/\w/</span>;</span><br><span class="line"></span><br><span class="line">reg.test(<span class="string">'a'</span>);    <span class="comment">// true</span></span><br><span class="line">reg.test(<span class="string">'ab'</span>);   <span class="comment">// true</span></span><br><span class="line">reg.test(<span class="string">'$'</span>);    <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p>  加上 <code>g</code> 标志后，结果有了一丝不同~~</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/\w/g</span>;</span><br><span class="line">reg.test(<span class="string">'ab'</span>);    <span class="comment">// true</span></span><br><span class="line">reg.test(<span class="string">'ab'</span>);    <span class="comment">// true</span></span><br><span class="line">reg.test(<span class="string">'ab'</span>);    <span class="comment">// false</span></span><br><span class="line">reg.test(<span class="string">'ab'</span>);    <span class="comment">// true</span></span><br><span class="line">reg.test(<span class="string">'ab'</span>);    <span class="comment">// true</span></span><br><span class="line">reg.test(<span class="string">'ab'</span>);    <span class="comment">// true</span></span><br><span class="line">reg.test(<span class="string">'ab'</span>);    <span class="comment">// false</span></span><br></pre></td></tr></table></figure></li></ul><p>这是因为在匹配的时候并不是每次都是从头开始的，而是每次匹配都会从上次匹配结果的下一个位置开始匹配，也就是 <code>lastIndex</code> 属性</p><ul><li>第一次匹配到 <code>a</code>，</li><li>第二次从 <code>b</code> 开始，匹配到 <code>b</code></li><li>第三次从 <code>b</code> 开始，没有匹配结果</li><li><p>因此出现上面的现象</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/\w/g</span>;</span><br><span class="line"><span class="keyword">while</span>(reg.test(<span class="string">'ab'</span>)) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(reg.lastIndex);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 打印结果为 1，2</span></span><br></pre></td></tr></table></figure></li></ul><p><strong> <code>test()</code> 本意测试字符串和正则能否匹配上，而不关心是在哪个位置匹配到，所以就没必要加上 <code>g</code> 标志。</strong></p><h3 id="RegExp-prototype-exec-str"><a href="#RegExp-prototype-exec-str" class="headerlink" title="RegExp.prototype.exec(str)"></a><code>RegExp.prototype.exec(str)</code></h3><ul><li>使用正则表达式对字符串进行搜索，并将更新全局 RegExp 对象的属性以反映匹配结果</li><li>如果没有匹配的文本则返回 <code>null</code>，否则返回一个结果数组，数组有两个属性：<ul><li>index 声明匹配文本地第一个字符的位置</li><li>input 存放被检索的字符串 <code>string</code></li><li>第一个元素是与正则表达式相匹配的文本</li><li>第二个元素是与正则表达式的第一个子表达式相匹配的文本（如果有的话）</li><li>第三个元素是与正则表达式的第二个子表达式相匹配的文本（如果有的话），以此类推…</li></ul></li></ul><h4 id="非全局调用-exec-，返回数组"><a href="#非全局调用-exec-，返回数组" class="headerlink" title="非全局调用 exec() ，返回数组"></a>非全局调用 <code>exec()</code> ，返回数组</h4><pre><code><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/\d(\w)\d/</span>;</span><br><span class="line"><span class="keyword">var</span> str = <span class="string">'1a2b3c4d5e'</span>;</span><br><span class="line"><span class="keyword">var</span> ret = reg.exec(str);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(reg.lastIndex);  </span><br><span class="line"><span class="comment">// 0  非全局下，lastIndex 不生效，在此处无意义</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(ret.index);      </span><br><span class="line"><span class="comment">// 0  匹配结果（1a2）的第一个字符在被检索的字符串(1a2b3c4d5e)中的位置</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(ret.input);      </span><br><span class="line"><span class="comment">// 1a2b3c4d5e</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(ret.toString()); </span><br><span class="line"><span class="comment">// 1a2,a</span></span><br></pre></td></tr></table></figure></code></pre><h4 id="全局调用-exec-时，可以通过循环可以把每次匹配到的结果都拿到"><a href="#全局调用-exec-时，可以通过循环可以把每次匹配到的结果都拿到" class="headerlink" title="全局调用 exec() 时，可以通过循环可以把每次匹配到的结果都拿到"></a>全局调用 <code>exec()</code> 时，可以通过循环可以把每次匹配到的结果都拿到</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/\d(\w)(\w)\d/g</span>;</span><br><span class="line"><span class="keyword">var</span> str = <span class="string">'$1az2bb3cy4dd5ee'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>(ret = reg.exec(str)) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(reg.lastIndex + <span class="string">'\t'</span> + ret.index + <span class="string">'\t'</span> + ret.toString());</span><br><span class="line">    <span class="comment">// 511az2,a,z</span></span><br><span class="line">    <span class="comment">// 1173cy4,c,y</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>第一次匹配到的字符串是 <code>1az2</code> ，它在原字符串中的下一个字符的位置为 <code>5</code> ，且它第一个字符 <code>1</code> 在原字符串的位置为 <code>1</code>，其中第一个子表达式 <code>a</code>，第二个子表达式 <code>z</code></li><li>第二次匹配到的字符串是 <code>3cy4</code> ，它在原字符串中的下一个字符的位置为 <code>11</code> ，且它第一个字符 <code>3</code> 在原字符串的位置为 <code>7</code>，其中第一个子表达式 <code>c</code>，第二个子表达式 <code>y</code></li></ul><h2 id="字符串的与正则相关的方法"><a href="#字符串的与正则相关的方法" class="headerlink" title="字符串的与正则相关的方法"></a>字符串的与正则相关的方法</h2><h3 id="01-String-prototype-replace"><a href="#01-String-prototype-replace" class="headerlink" title="01-String.prototype.replace()"></a>01-String.prototype.replace()</h3><p><code>replace()</code> 方法的参数可以是一下几种方式：</p><h4 id="1-replace-str-str"><a href="#1-replace-str-str" class="headerlink" title="1. replace( str, str )"></a>1. <code>replace( str, str )</code></h4><pre><code><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'a1b'</span>.replace(<span class="string">'1'</span>, <span class="string">'2'</span>);    <span class="comment">// "a2b"</span></span><br><span class="line"></span><br><span class="line"><span class="string">'a1b1c1'</span>.replace(<span class="string">'1'</span>, <span class="string">'2'</span>);    <span class="comment">// "a2b1c1"</span></span><br></pre></td></tr></table></figure></code></pre><h4 id="2-replace-str-reg"><a href="#2-replace-str-reg" class="headerlink" title="2. replace( str, reg )"></a>2. <code>replace( str, reg )</code></h4><pre><code><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'a1b1c1'</span>.replace(<span class="regexp">/1/g</span>, <span class="string">'2'</span>);    <span class="comment">// "a2b2c2"</span></span><br></pre></td></tr></table></figure></code></pre><h4 id="3-replace-str-function"><a href="#3-replace-str-function" class="headerlink" title="3. replace( str, function )"></a>3. <code>replace( str, function )</code></h4><h5 id="示例：字符串中每个数字都加-1"><a href="#示例：字符串中每个数字都加-1" class="headerlink" title="示例：字符串中每个数字都加 1"></a>示例：字符串中每个数字都加 1</h5><pre><code><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'a1b2c3d4e5'</span>.replace(<span class="regexp">/\d/g</span>, <span class="function"><span class="keyword">function</span> (<span class="params"> match, index, origin </span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 正则表达式没有分组内容</span></span><br><span class="line">    <span class="built_in">console</span>.log(index);  <span class="comment">// 1 3 5 7 9</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">parseInt</span>(match) + <span class="number">1</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// "a2b3c4d5e6"</span></span><br></pre></td></tr></table></figure></code></pre><h5 id="示例：获取-url-中的查询参数"><a href="#示例：获取-url-中的查询参数" class="headerlink" title="示例：获取 url 中的查询参数"></a>示例：获取 <code>url</code> 中的查询参数</h5><pre><code><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 准备工作：取得查询字符串</span></span><br><span class="line"><span class="comment">// 假设当前 URL 为 'http://www.baidu.com?ie=UTF-8&amp;wd=regexp'</span></span><br><span class="line"><span class="comment">// 可用如下方法获取查询字符串</span></span><br><span class="line"><span class="comment">// var searchStr = location.search.slice(1);  // 'ie=UTF-8&amp;wd=regexp'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 利用正则获取查询参数</span></span><br><span class="line"><span class="keyword">var</span> searchStr = <span class="string">'ie=UTF-8&amp;wd=regexp'</span>;</span><br><span class="line"><span class="keyword">var</span> paraObj = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">searchStr.replace(<span class="regexp">/([^=&amp;]+)=([^=&amp;]*)/ig</span>, <span class="function"><span class="keyword">function</span> (<span class="params"> match, group1, group2, index, origin</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">console</span>.log(match + <span class="string">'\t'</span> + group1 + <span class="string">'\t'</span> + group2 + <span class="string">'\t'</span> + index + <span class="string">'\t'</span> + origin);</span><br><span class="line">    <span class="comment">// ie=UTF-8    ie  UTF-8   0   ie=UTF-8&amp;wd=regexp</span></span><br><span class="line">    <span class="comment">// wd=regexp    wd  regexp  9   ie=UTF-8&amp;wd=regexp</span></span><br><span class="line">    paraObj[group1] = group2</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(paraObj);</span><br></pre></td></tr></table></figure></code></pre><p><strong>function 参数含义：</strong></p><ol><li>匹配字符串</li><li>正则表达式分组内容，没有分组则没有该参数</li><li>匹配项在字符串中的 <code>index</code></li><li>原字符串</li></ol><table><thead><tr><th></th><th style="text-align:center"><code>match</code></th><th style="text-align:center"><code>group1</code></th><th style="text-align:center"><code>group2</code></th><th style="text-align:center"><code>index</code></th><th style="text-align:center"><code>origin</code></th></tr></thead><tbody><tr><td>第一次</td><td style="text-align:center"><code>ie=UTF-8</code></td><td style="text-align:center"><code>ie</code></td><td style="text-align:center"><code>UTF-8</code></td><td style="text-align:center"><code>0</code></td><td style="text-align:center"><code>ie=UTF-8&amp;wd=regexp</code></td></tr><tr><td>第二次</td><td style="text-align:center"><code>wd=regexp</code></td><td style="text-align:center"><code>wd</code></td><td style="text-align:center"><code>regexp</code></td><td style="text-align:center"><code>9</code></td><td style="text-align:center"><code>ie=UTF-8&amp;wd=regexp</code></td></tr></tbody></table><h3 id="String-prototype-search-reg"><a href="#String-prototype-search-reg" class="headerlink" title="String.prototype.search(reg)"></a><code>String.prototype.search(reg)</code></h3><ul><li><code>search()</code> 用于检索字符串中指定的子字符串，或检索与正则表达式相匹配的子字符串</li><li>方法返回第一个匹配结果 <code>index</code> ，差找不到返回 <code>-1</code></li><li><p><code>search()</code> 不执行全局匹配，他将会略全局标志 <code>g</code> ，并且总是从字符串的开始进行检索</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'a1b2c3d4'</span>.search(<span class="string">'1'</span>);</span><br><span class="line"><span class="string">'a1b2c3d4'</span>.search(<span class="regexp">/1/</span>);</span><br></pre></td></tr></table></figure></li></ul><p>传入的参数不是正则的时候会尝试将其转换为正则</p><h3 id="String-prototype-match-reg"><a href="#String-prototype-match-reg" class="headerlink" title="String.prototype.match(reg)"></a><code>String.prototype.match(reg)</code></h3><ul><li><code>match()</code> 检索字符串，以找到一个或多个与正则表达式相匹配的文本</li><li>正则是否具有全局标志 <code>g</code> ，对结果影响很大</li></ul><h3 id="String-prototype-split-reg"><a href="#String-prototype-split-reg" class="headerlink" title="String.prototype.split(reg)"></a><code>String.prototype.split(reg)</code></h3><pre><code><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'a,b,c,d'</span>.split(<span class="string">','</span>);    <span class="comment">// ["a", "b", "c", "d"]</span></span><br><span class="line"></span><br><span class="line"><span class="string">'a1b2c3d'</span>.split(<span class="regexp">/\d/</span>);   <span class="comment">// ["a", "b", "c", "d"]</span></span><br></pre></td></tr></table></figure></code></pre>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;元字符&quot;&gt;&lt;a href=&quot;#元字符&quot; class=&quot;headerlink&quot; title=&quot;元字符&quot;&gt;&lt;/a&gt;元字符&lt;/h2&gt;&lt;p&gt;元字符既可以是放在 &lt;code&gt;[]&lt;/code&gt; 中的任意单个字符（如 &lt;code&gt;[a]&lt;/code&gt; 表示匹配单个小写字符 &lt;code&gt;a&lt;/code&gt; ）&lt;/p&gt;
&lt;p&gt;也可以是字符序列（如 &lt;code&gt;[a-d]&lt;/code&gt; 表示匹配 &lt;code&gt;a&lt;/code&gt; 、 &lt;code&gt;b&lt;/code&gt; 、 &lt;code&gt;c&lt;/code&gt; 、 &lt;code&gt;d&lt;/code&gt; 之间的任意一个字符，而 &lt;code&gt;\w&lt;/code&gt; 表示任意英文字母和数字及下划线）&lt;/p&gt;
    
    </summary>
    
      <category term="oh-my-article" scheme="https://wencaizhang.gitee.io/categories/oh-my-article/"/>
    
      <category term="todoxxx" scheme="https://wencaizhang.gitee.io/categories/oh-my-article/todoxxx/"/>
    
    
      <category term="regexp" scheme="https://wencaizhang.gitee.io/tags/regexp/"/>
    
  </entry>
  
</feed>
